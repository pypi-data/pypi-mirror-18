#! /bin/bash

export CLOUDSDK_PYTHON_SITEPACKAGES=1
STABLE_TAG=stable
DOCKER_PUSH_COMMAND=${DOCKER_PUSH_COMMAND:-"docker push"}

docker tag $DOCKER_IMAGE:$DOCKER_TAG $REMOTE_DOCKER_PATH/$DOCKER_IMAGE:$DOCKER_TAG
docker tag $DOCKER_IMAGE:$DOCKER_TAG $REMOTE_DOCKER_PATH/$DOCKER_IMAGE:$STABLE_TAG

exec $DOCKER_PUSH_COMMAND $REMOTE_DOCKER_PATH/$DOCKER_IMAGE:$DOCKER_TAG
exec $DOCKER_PUSH_COMMAND $REMOTE_DOCKER_PATH/$DOCKER_IMAGE:$STABLE_TAG

# TODO: Remove stable stuff from here. Have the caller decide
