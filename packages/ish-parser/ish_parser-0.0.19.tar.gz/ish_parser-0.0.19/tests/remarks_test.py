import unittest
import datetime
from src.ish_report import ish_report, ish_reportException

class remarks_test(unittest.TestCase):

  def test_kord_single_remark(self):
    noaa_string = """0296725300948462015010900397+41995-087934FM-16+0205KORD V0202205N00725006105MN0032195N5-01065-01395999999ADDAA101000021AU110030015AU225030015AW1275AW2715GA1085+006105999GD14991+0061059GE19MSL   +99999+99999GF199999999999006101999999MA1100955098525OC101135OD149901491220REMMET12301/08/15 18:39:01 SPECI KORD 090039Z 22014G22KT 2SM -SN BLSN OVC020 M11/M14 A2981 RMK AO2 PK WND 22029/2356 P0000 T11061139"""
    remark = noaa_string[278:]
    weather = ish_report()
    weather.loads(noaa_string)
    remarks = weather.remarks()
    self.assertEqual(remarks['MET'], remark)

  def test_kord_no_remark(self):
    noaa_string = """0164725300948462015010900397+41995-087934FM-16+0205KORD V0202205N00725006105MN0032195N5-01065-01395999999ADDAA101000021AU110030015AU225030015AW1275AW2715GA1085+006105999GD14991+0061059GE19MSL   +99999+99999GF199999999999006101999999MA1100955098525OC101135OD149901491220"""
    weather = ish_report()
    weather.loads(noaa_string)
    remarks = weather.remarks()
    self.assertEqual(len(remarks.keys()), 0)

  def test_panc_multi_remark(self):
    noaa_string = """0490702730264512005120806537+61175-149990SY-MT+0040PANC V0209999C00005016765MN0160935N5+00065+00005097625ADDAA101000395AU110020025AU220030035AW1615AW2715GA1025+001225999GA2075+016765999GA3085+022865999GD11991+0012259GD23991+0167659GD34991+0228659GF108991999999001501999999KA1240M+00111KA2240N-00381MA1097605097135MD1510121+9999MW1731REMSYN110AAXX  08064 70273 11266 82908 10006 20000 39713 49760 55012 69901 773// 90553 333 10011 21038 96073 555 90806;MET13712/07/05 21:53:26 METAR PANC 080653Z 00000KT 10SM -RASN FEW004 BKN055 OVC075 01/00 A2882 RMK AO2 SLP762 LOW ST ALQDS P0001 T00060000 (EZ)"""
    remark_met = """12/07/05 21:53:26 METAR PANC 080653Z 00000KT 10SM -RASN FEW004 BKN055 OVC075 01/00 A2882 RMK AO2 SLP762 LOW ST ALQDS P0001 T00060000 (EZ)"""
    remark_syn = """AAXX  08064 70273 11266 82908 10006 20000 39713 49760 55012 69901 773// 90553 333 10011 21038 96073 555 90806;"""
    weather = ish_report()
    weather.loads(noaa_string)
    remarks = weather.remarks()
    self.assertEqual(len(remarks.keys()), 2)
    self.assertEqual(remarks['MET'], remark_met)
    self.assertEqual(remarks['SYN'], remark_syn)
