

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Execute Time &mdash; jupyter_contrib_nbextensions 0.2.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/badge_only.css" type="text/css" />
  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../search.html"/>
    <link rel="top" title="jupyter_contrib_nbextensions 0.2.1 documentation" href="../../../../index.html"/>
        <link rel="up" title="List of provided nbxtensions" href="../../../../docs/source/nbextensions.html"/>
        <link rel="next" title="Exercise" href="../exercise/readme.html"/>
        <link rel="prev" title="MathJax Equation Numbering" href="../equation-numbering/readme.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../docs/source/index.html" class="icon icon-home"> jupyter_contrib_nbextensions
          

          
          </a>

          
            
            
              <div class="version">
                0.2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/source/install.html">Installing Jupyter Notebook Extensions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../docs/source/nbextensions.html">List of provided nbxtensions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../latex_envs/readme.html">LaTeX environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autosavetime/README.html">autosavetime</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoscroll/README.html">autoscroll</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chrome-clipboard/readme.html">Chrome Clipboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_font_size/README.html">Code Font Size</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_prettify/README.html">A Code Prettifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../codefolding/readme.html">Codefolding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collapsible_headings/readme.html">Collapsible Headings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../comment-uncomment/readme.html">Comment/Uncomment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib_nbextensions_help_item/README.html">Help menu entry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datestamper/readme.html">Datestamper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dragdrop/readme.html">Drag and Drop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../equation-numbering/readme.html">MathJax Equation Numbering</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Execute Time</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#toggling-display">Toggling display</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limitations">Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#internals">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../exercise/readme.html">Exercise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercise2/readme.html">Exercise2 extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../freeze/readme.html">Freeze</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gist_it/readme.html">Gist it</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help_panel/readme.html">Help Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hide_input/readme.html">Hide Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hide_input_all/readme.html">Hide all Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../highlighter/readme.html">The highlighter extension:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../highlighter/readme.html#installation">Installation:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hinterland/README.html">Hinterland</a></li>
<li class="toctree-l2"><a class="reference internal" href="../init_cell/README.html">init_cell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../keyboard_shortcut_editor/README.html">Keyboard shortcut editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qtconsole/README.html">QT Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../limit_output/readme.html">Limit Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../move_selected_cells/README.html">Move selected cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../navigation-hotkeys/readme.html">Navigation Hotkeys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notify/readme.html">Notebook web notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../printview/readme.html">Printview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python-markdown/readme.html">Python Markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rubberband/readme.html">Rubberband</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ruler/readme.html">Ruler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../runtools/readme.html">Runtools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scratchpad/README.html">Scratchpad notebook extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../search-replace/readme.html">Search and Replace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../select_keymap/README.html">Select CodeMirror Keymap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../skill/README.html">SKILL for Codemirror</a></li>
<li class="toctree-l2"><a class="reference internal" href="../skip-traceback/readme.html">Skip traceback</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spellchecker/README.html">Spellchecker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../splitcell/readme.html">Split Cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc2/README.html">Table of Contents (2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../table_beautifier/README.html">Table Beautifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toggle_all_line_numbers/readme.html">Toggle all line numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tree-filter/readme.html">Tree-filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zenmode/README.html">Zenmode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/source/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/source/exporting.html">Exporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/source/internals.html">Notebook extension structure</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../docs/source/index.html">jupyter_contrib_nbextensions</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../docs/source/index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../../docs/source/nbextensions.html">List of provided nbxtensions</a> &raquo;</li>
      
    <li>Execute Time</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/src/jupyter_contrib_nbextensions/nbextensions/execute_time/readme.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="execute-time">
<span id="execute-time"></span><h1>Execute Time<a class="headerlink" href="#execute-time" title="Permalink to this headline">¶</a></h1>
<p>This extension displays when the last execution of a code cell occurred, and
how long it took.</p>
<p>Every executed code cell is extended with a new area, attached at the bottom of
the input area, that displays the time at which the user sent the cell to the
kernel for execution.
When the kernel finishes executing the cell, the area is updated with the
duration of the execution.
The timing information is stored in the cell metadata, and restored on notebook
load.</p>
<p><img alt="" src="../../../../_images/execution-timings-box.png" /></p>
<div class="section" id="toggling-display">
<span id="toggling-display"></span><h2>Toggling display<a class="headerlink" href="#toggling-display" title="Permalink to this headline">¶</a></h2>
<p>The timing area can be hidden by double clicking on it, or using the
<code class="docutils literal"><span class="pre">Cell</span> <span class="pre">-&gt;</span> <span class="pre">Toggle</span> <span class="pre">timings</span> <span class="pre">-&gt;</span> <span class="pre">Selected</span></code>
menu item.
The menu item
<code class="docutils literal"><span class="pre">Cell</span> <span class="pre">-&gt;</span> <span class="pre">Toggle</span> <span class="pre">timings</span> <span class="pre">-&gt;</span> <span class="pre">All</span></code>
hides (shows) all the timing areas in the notebook, if the first cell is
currently shown (hidden).</p>
<p><img alt="" src="../../../../_images/execution-timings-menu.png" /></p>
</div>
<div class="section" id="limitations">
<span id="limitations"></span><h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>For a reason I don&#8217;t understand, when multiple cells are queued for execution,
the kernel doesn&#8217;t send a reply immediately after finishing executing each
cell.
Some replies are delayed, and sent at the same time as later replies, meaning
that the output of a cell can be updated with its finished value, before the
notebook recieves the kernel execution reply.
For the same reason, you can see this in the fact that the star for an
executing cell can remain next to two cells at once, if several are queued to
execute together.
Since this extension uses the times in the kernel message (see internals,
below), and these remain correct, the timings displayed are still accurate,
but they may get displayed later due to this kernel issue.</p>
</div>
<div class="section" id="installation">
<span id="installation"></span><h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Install the master version of the jupyter_contrib_nbextensions repository as
explained in the docs at
<a class="reference external" href="https://jupyter-contrib-nbextensions.readthedocs.io/en/latest/install.html">jupyter-contrib-nbextensions.readthedocs.io</a>.</p>
<p>Then you can use the
<a class="reference external" href="https://github.com/Jupyter-contrib/jupyter_nbextensions_configurator">jupyter_nbextensions_configurator</a>
to enable/disable this extension for all notebooks.</p>
</div>
<div class="section" id="internals">
<span id="internals"></span><h2>Internals<a class="headerlink" href="#internals" title="Permalink to this headline">¶</a></h2>
<p>The execution start and end times are stored in the cell metadata as ISO8601
strings, for example:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;ExecuteTime&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;start_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-02-11T18:51:18.536796&quot;</span><span class="p">,</span>
        <span class="nt">&quot;end_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-02-11T18:51:35.806119&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The times in the timing areas are formatted using the
<a class="reference external" href="http://momentjs.com/">moment.js</a> library (already included as part of
Jupyter), but the durations use a custom formatting function, as
I (<a class="reference external" href="https://github.com/jcb91">&#64;jcb91</a>)
couldn&#8217;t find an existing one that I liked.</p>
<p>The event <code class="docutils literal"><span class="pre">execute.CodeCell</span></code> is caught in order to create a start time, and add
the timing area with its &#8216;Execution queued at&#8217; message.
The extension again uses <a class="reference external" href="http://momentjs.com/">moment.js</a> for formatting this
as an ISO string time.</p>
<p>To determine the execution time, the extension patches the Jupyter class
prototype <code class="docutils literal"><span class="pre">CodeCell.prototype.get_callbacks</span></code> from <code class="docutils literal"><span class="pre">notebook/js/codecell.js</span></code>.
This patch then patches the <code class="docutils literal"><span class="pre">callbacks.shell.reply</span></code> function returned by the
original <code class="docutils literal"><span class="pre">CodeCell.prototype.get_callbacks</span></code>, wrapping it in a function which
reads the <code class="docutils literal"><span class="pre">msg.header.date</span></code> value from the kernel message, to provide the
execution end time.
This is more accurate than creating a new time, which can be affected by
client-side variability.
In addition, for accurate timings, the start time is also revised using
the <code class="docutils literal"><span class="pre">msg.metadata.started</span></code> value supplied in the callback, which can be very
different from the time the cell was queued for execution (as a result of
other cells already being executed).
The kernel reply message times are already ISO8601 strings, so no conversion is
necessary, although again, <a class="reference external" href="http://momentjs.com/">moment.js</a> is used for
parsing and diff&#8217;ing them.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../exercise/readme.html" class="btn btn-neutral float-right" title="Exercise" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../equation-numbering/readme.html" class="btn btn-neutral" title="MathJax Equation Numbering" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2016, Jupyter Contrib Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'0.2.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>