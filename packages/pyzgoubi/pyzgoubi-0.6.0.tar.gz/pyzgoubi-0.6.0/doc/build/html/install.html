<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PyZgoubi Installation &mdash; PyZgoubi 0.6.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PyZgoubi 0.6.0 documentation" href="index.html" />
    <link rel="next" title="PyZgoubi Documentation" href="doc.html" />
    <link rel="prev" title="Welcome to PyZgoubi’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="doc.html" title="PyZgoubi Documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to PyZgoubi’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyZgoubi 0.6.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pyzgoubi-installation">
<h1>PyZgoubi Installation<a class="headerlink" href="#pyzgoubi-installation" title="Permalink to this headline">¶</a></h1>
<p>PyZgoubi is developed on Linux, but can also be installed on MacOS X and Windows.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>PyZgoubi follows standard Python install methods, but requires a few packages to be installed first.</p>
<div class="section" id="general-requirements">
<h3>General Requirements<a class="headerlink" href="#general-requirements" title="Permalink to this headline">¶</a></h3>
<p>PyZgoubi requires Python 2.5-2.7. It also requires the python math and science packages, Numpy and SciPy. For some graphical functions it uses Matplotlib.</p>
<div class="section" id="linux">
<h4>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h4>
<p>On linux Python 2 is usually already installed. Other packages can be installed using the package manager, for example on Fedora/Red Hat/Scientific:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo yum install numpy scipy python-matplotlib
</pre></div>
</div>
<p>Or on Ubuntu/Debian:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo apt-get install python-numpy python-scipy python-matplotlib
</pre></div>
</div>
</div>
<div class="section" id="macos-x">
<h4>MacOS X<a class="headerlink" href="#macos-x" title="Permalink to this headline">¶</a></h4>
<p>On MacOS X Python 2 is already installed. The simplest method to install the scientific packages is with the <a class="reference external" href="https://enthought.com/#canopy">Enthought Canopy distribution</a></p>
</div>
<div class="section" id="windows">
<h4>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h4>
<p>The simplest method to install python and the scientific packages is with the <a class="reference external" href="https://enthought.com/#canopy">Enthought Canopy distribution</a></p>
<p>Or the packages can be installed from the <a class="reference external" href="http://www.scipy.org/">SciPy website</a></p>
</div>
</div>
<div class="section" id="additional-requirements">
<h3>Additional Requirements<a class="headerlink" href="#additional-requirements" title="Permalink to this headline">¶</a></h3>
<p>Some additional packages are useful if you want to run development versions of PyZgoubi and Zgoubi.</p>
<ul class="simple">
<li>GCC/GFortran, for building Zgoubi</li>
<li>Subversion, source code management for Zgoubi</li>
<li>Bazaar, source code management for PyZgoubi</li>
<li>MinGW, on windows required for building Zgoubi</li>
</ul>
<div class="section" id="id2">
<h4>Linux<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>GCC/GFortran, Subversion and Bazaar can be installed with the package manager,for example on Fedora/Red Hat/Scientific:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo yum install gcc gcc-gfortran subversion bzr patch
</pre></div>
</div>
<p>Or on Ubuntu/Debian:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo apt-get install gcc gfortran subversion bzr
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h4>Windows<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>You need Mingw to compile Zgoubi on windows. Get the file mingw-get-setup.exe from <a class="reference external" href="http://sourceforge.net/projects/mingw/">http://sourceforge.net/projects/mingw/</a> or <a class="reference external" href="http://www.mingw.org/">http://www.mingw.org/</a></p>
<p>From the MinGW Installation manager make sure you have:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">mingw</span><span class="o">-</span><span class="n">developer</span><span class="o">-</span><span class="n">toolkit</span>
<span class="n">mingw32</span><span class="o">-</span><span class="n">base</span>
<span class="n">mingw32</span><span class="o">-</span><span class="n">gcc</span><span class="o">-</span><span class="n">fortran</span>
</pre></div>
</div>
<p>You need subversion to get development versions of Zgoubi <a class="reference external" href="https://subversion.apache.org/">https://subversion.apache.org/</a>
Windows packages can be downloaded from <a class="reference external" href="http://www.sliksvn.com/en/download">http://www.sliksvn.com/en/download</a></p>
<p>You need Bazaar to get development versions of PyZgoubi
<a class="reference external" href="http://bazaar.canonical.com/">http://bazaar.canonical.com/</a></p>
</div>
</div>
<div class="section" id="zgoubi">
<h3>Zgoubi<a class="headerlink" href="#zgoubi" title="Permalink to this headline">¶</a></h3>
<p>Zgoubi is the tracking engine at the heart of PyZgoubi. Compiled binaries and source code of Zgoubi can be downloaded from the <a class="reference external" href="https://sourceforge.net/projects/zgoubi/">Zgoubi website</a></p>
<p>Some features in PyZgoubi require features in the development branch of Zgoubi. The development source can be downloaded using SVN:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>svn checkout svn://svn.code.sf.net/p/zgoubi/code/trunk zgoubi-code
</pre></div>
</div>
<div class="section" id="automatic-zgoubi-install">
<span id="automaticzgoubiinstall"></span><h4>Automatic Zgoubi install<a class="headerlink" href="#automatic-zgoubi-install" title="Permalink to this headline">¶</a></h4>
<p>PyZgoubi includes an automatic script for building a development version of Zgoubi that has been confirmed to be compatible. Once PyZgoubi and the additional requirements above have been installed Zgoubi can be built with the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pyzgoubi</span> <span class="o">--</span><span class="n">install</span><span class="o">-</span><span class="n">zgoubi</span>
</pre></div>
</div>
<p>You will then need to edit your PyZgoubi configuration file to use this build. Edit the settings.ini file in the .pyzgoubi folder in your home directory, and add the path line given by the previous command.</p>
<p>Specific versions can be built:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>pyzgoubi --install-zgoubi 570
pyzgoubi --install-zgoubi list   # to see a list of avaliable versions
</pre></div>
</div>
<p>Additional build options can be given:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>pyzgoubi --install-zgoubi MXSTEP=1000
</pre></div>
</div>
<p>This allows adjusting some of the compile time parameters found in the include/ files, for example</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MXSTEP</td>
<td>Maximum steps per magnet</td>
</tr>
<tr class="row-odd"><td>MXL</td>
<td>Maximum elements in line</td>
</tr>
<tr class="row-even"><td>MXT</td>
<td>Maximum number of particles</td>
</tr>
<tr class="row-odd"><td>MXX, MXY</td>
<td>Maximum steps in X and Y for field maps</td>
</tr>
<tr class="row-even"><td>IZ</td>
<td>Maximum steps in Z for field maps</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="automatic-zgoubi-install-windows">
<h4>Automatic Zgoubi install Windows<a class="headerlink" href="#automatic-zgoubi-install-windows" title="Permalink to this headline">¶</a></h4>
<p>You need to have the following already installed PyZgoubi, Subversion and minGW.</p>
<p>To activate the minGW tools for this terminal you need to temporarily add to the PATH variable.:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>set PATH=%PATH%;C:\MinGW\bin;C:\MinGW\msys\1.0\bin
</pre></div>
</div>
<p>then build with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pyzgoubi</span> <span class="o">--</span><span class="n">install</span><span class="o">-</span><span class="n">zgoubi</span>
</pre></div>
</div>
<p>if you are have 32bit MinGW you might need to do:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>pyzgoubi --install-zgoubi 365_32bit
</pre></div>
</div>
<p>You will then need set this zgoubi in the pyzgoubi settings. edit the settings.ini file in .pyzgoubi in your home folder, and add a line like:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>zgoubi_path = C:\Users\sam\.pyzgoubi\bin\zgoubi_365_32bit.exe
</pre></div>
</div>
</div>
<div class="section" id="manual-zgoubi-install-windows">
<h4>Manual Zgoubi install windows<a class="headerlink" href="#manual-zgoubi-install-windows" title="Permalink to this headline">¶</a></h4>
<p>In C:MinGWmsys1.0 you will find msys.bat. Double clicking this will give you a terminal with the GNU tools required for building Zgoubi.</p>
<p>Make sure the minGW path is set properly in msys (see <a class="reference external" href="http://www.mingw.org/wiki/Getting_Started">http://www.mingw.org/wiki/Getting_Started</a> ). For me I had to rename the file fstab.sample to fstab in C:MinGWmsys1.0etc</p>
<p>Manual install of Zgoubi: (see below for auto install)
To build Zgoubi download the source zgoubi-5.1.0.zip from <a class="reference external" href="https://sourceforge.net/projects/zgoubi/">https://sourceforge.net/projects/zgoubi/</a>
Extract the source folder, and cd into it from the msys terminal:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cd /c/Users/sam/Documents/zgoubi-5.1.0/
</pre></div>
</div>
<p>edit the Makefile in this folder. You need to add a &#8216;#&#8217; to the lines that contain &#8216;cd zpop&#8217;, as zpop cannot be built on Windows.</p>
<p>Then type:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">make</span>
</pre></div>
</div>
<p>If this completes without errors, try running:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">zgoubi</span><span class="o">/</span><span class="n">zgoubi</span><span class="o">.</span><span class="n">exe</span>
</pre></div>
</div>
<p>You should see a message:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>PGM ZGOUBIL error open file zgoubi.dat
</pre></div>
</div>
<p>This means that Zgoubi has compiled.</p>
</div>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Once the requirements are installed, PyZgoubi itself can be installed.</p>
<div class="section" id="installing-from-the-python-package-index">
<h3>Installing from the Python Package Index<a class="headerlink" href="#installing-from-the-python-package-index" title="Permalink to this headline">¶</a></h3>
<p>PyZgoubi can be installed with the tool pip:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>pip install --user pyzgoubi
</pre></div>
</div>
</div>
<div class="section" id="linux-and-mac-os-x">
<h3>Linux and Mac OS X<a class="headerlink" href="#linux-and-mac-os-x" title="Permalink to this headline">¶</a></h3>
<p>I recommend that the PyZgoubi source and install are kept together in a folder. Create a new folder, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mkdir ~/zgoubi
cd ~/zgoubi
mkdir install
mkdir src
</pre></div>
</div>
<p>To install are release version download the tar.gz file from the <a class="reference external" href="http://www.hep.manchester.ac.uk/u/samt/pyzgoubi/">PyZgoubi website</a>. Download it into the ~/zgoubi/src directory, and unzip it:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cd ~/zgoubi/src
tar -xf pyzgoubi-0.4.91.tar.gz
cd pyzgoubi-0.4.91
</pre></div>
</div>
<p>Or to get a development version:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cd ~/zgoubi/src
bzr branch bzr://pyzgoubi.bzr.sourceforge.net/bzrroot/pyzgoubi/trunk pyzgoubi-trunk
cd pyzgoubi-trunk
</pre></div>
</div>
<p>Then to install:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>./setup.py install --prefix=~/zgoubi/install
</pre></div>
</div>
<p>You will then nee to edit you bash set up use PyZgoubi. Edit you .bashrc, add the lines as instructed by the output of the previous command, e.g.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>export PYTHONPATH=/home/sam/zgoubi/install/lib/python2.7/site-packages:$PYTHONPATH
export PATH=/home/sam/zgoubi/install/bin:$PATH
</pre></div>
</div>
<p>To check your install open a new terminal and run:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pyzgoubi</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>If you want to use PyZgoubi&#8217;s auto install script for Zgoubi check the &#8216;Automatic Zgoubi Install&#8217; section now.</p>
<p>You may need to edit you settings.ini file in the .pyzgoubi folder, to adjust settings and to set the path to your Zgoubi install.</p>
</div>
<div class="section" id="id4">
<h3>Windows<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>To keep everything neat its is work making a folder to keep PyZgoubi source code and install in.:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>C:\Users\sam&gt;mkdir pyzgoubi
C:\Users\sam&gt;cd pyzgoubi
C:\Users\sam\pyzgoubi&gt;mkdir source
C:\Users\sam\pyzgoubi&gt;mkdir install
C:\Users\sam\pyzgoubi&gt;cd source
</pre></div>
</div>
<p>To get the current developement (you need Bazaar installed) version run:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>C:\Users\sam\pyzgoubi\source&gt;bzr branch bzr://pyzgoubi.bzr.sourceforge.net/bzrroot/pyzgoubi/trunk pyzgoubi-trunk
C:\Users\sam\pyzgoubi&gt;cd pyzgoubi-trunk
C:\Users\sam\pyzgoubi\source\pyzgoubi-trunk&gt;python setup.py install --prefix=C:\Users\sam\pyzgoubi\install
</pre></div>
</div>
<p>The installer will prompt you to add another path to your PATH, eg:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>C:\Users\sam\pyzgoubi\install\Scripts
</pre></div>
</div>
<p>To do this go to the environment variables control panel, and add to the end of the Path variable (using a semicolon &#8216;;&#8217; to separate it from the existing entries).</p>
<p>If you then open a new command prompt, and run:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pyzgoubi</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>you should see some output showing which version of PyZgoubi and its dependencies you are running.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PyZgoubi Installation</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a><ul>
<li><a class="reference internal" href="#general-requirements">General Requirements</a><ul>
<li><a class="reference internal" href="#linux">Linux</a></li>
<li><a class="reference internal" href="#macos-x">MacOS X</a></li>
<li><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#additional-requirements">Additional Requirements</a><ul>
<li><a class="reference internal" href="#id2">Linux</a></li>
<li><a class="reference internal" href="#id3">Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#zgoubi">Zgoubi</a><ul>
<li><a class="reference internal" href="#automatic-zgoubi-install">Automatic Zgoubi install</a></li>
<li><a class="reference internal" href="#automatic-zgoubi-install-windows">Automatic Zgoubi install Windows</a></li>
<li><a class="reference internal" href="#manual-zgoubi-install-windows">Manual Zgoubi install windows</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#installing-from-the-python-package-index">Installing from the Python Package Index</a></li>
<li><a class="reference internal" href="#linux-and-mac-os-x">Linux and Mac OS X</a></li>
<li><a class="reference internal" href="#id4">Windows</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to PyZgoubi&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="doc.html"
                        title="next chapter">PyZgoubi Documentation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/install.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="doc.html" title="PyZgoubi Documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to PyZgoubi’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">PyZgoubi 0.6.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, Sam Tygier.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>