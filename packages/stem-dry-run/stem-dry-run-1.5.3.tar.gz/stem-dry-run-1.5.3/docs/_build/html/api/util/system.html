

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>System Utilities &mdash; Stem 1.5.2 documentation</title>
    
    <link rel="stylesheet" href="../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.5.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="top" title="Stem 1.5.2 documentation" href="../../index.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="../../_static/logo.png" alt="Logo"/><h1 class="heading"><a href="../../index.html">
          <span>Stem Docs</span></a></h1>
        <h2 class="heading"><span>System Utilities</span></h2>
      </div>
      <div class="topnav">
      
        <p>

        <ul id="navbar">
          <li><a href="../../index.html">Home</a></li>
          <li><a href="../../tutorials.html">Tutorials</a>
            <ul>
              <li><a href="../../tutorials/the_little_relay_that_could.html">Hello World</a></li>
              <li><a href="../../tutorials/to_russia_with_love.html">Client Usage</a></li>
              <li><a href="../../tutorials/tortoise_and_the_hare.html">Event Listening</a></li>
              <li><a href="../../tutorials/over_the_river.html">Hidden Services</a></li>
              <li><a href="../../tutorials/mirror_mirror_on_the_wall.html">Tor Descriptors</a></li>
              <li><a href="../../tutorials/east_of_the_sun.html">Utilities</a></li>
              <li><a href="../../tutorials/down_the_rabbit_hole.html">Interpreter</a></li>
              <li><a href="../../tutorials/double_double_toil_and_trouble.html">Examples</a></li>
            </ul>
          </li>
          <li><a href="../../api.html">API</a>
            <ul>
              <li><a href="../control.html">stem.control</a></li>
              <li><a href="../connection.html">stem.connection</a></li>
              <li><a href="../socket.html">stem.socket</a></li>
              <li><a href="../process.html">stem.process</a></li>
              <li><a href="../response.html">stem.response</a></li>
              <li><a href="../exit_policy.html">stem.exit_policy</a></li>
              <li><a href="../version.html">stem.version</a></li>
              <li><a href="../../api.html#descriptors">Descriptors</a></li>
              <li><a href="../../api.html#utilities">Utilities</a></li>
            </ul>
          </li>
          <li><a href="https://trac.torproject.org/projects/tor/wiki/doc/stem">Development</a>
            <ul>
              <li><a href="../../faq.html">FAQ</a></li>
              <li><a href="../../change_log.html">Change Log</a></li>
              <li><a href="https://trac.torproject.org/projects/tor/wiki/doc/stem/bugs">Bug Tracker</a></li>
              <li><a href="https://trac.torproject.org/projects/tor/wiki/doc/stem">Wiki</a></li>
              <li><a href="../../download.html">Download</a></li>
            </ul>
          </li>
          <li><a href="../../faq.html#where-can-i-get-help">Contact</a>
            <ul>
              <li><a href="https://lists.torproject.org/cgi-bin/mailman/listinfo/tor-dev">Email List</a></li>
              <li><a href="https://www.torproject.org/about/contact.html.en#irc">IRC</a></li>
              <li><a href="https://www.atagar.com/contact/">Author</a></li>
            </ul>
          </li>
        </ul>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="module-stem.util.system">
<span id="system-utilities"></span><h1>System Utilities<a class="headerlink" href="#module-stem.util.system" title="Permalink to this headline">¶</a></h1>
<p>Helper functions for working with the underlying system. These are mostly os
dependent, only working on linux, osx, and bsd. In almost all cases they're
best-effort, providing <strong>None</strong> if the lookup fails.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.3.0: </span>Dropped the get_* prefix from several function names. The old names still
work, but are deprecated aliases.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.5.0: </span>Added the <strong>SYSTEM_CALL_TIME</strong> global, which tracks total time spent making
system commands.</p>
<p><strong>Module Overview:</strong></p>
<div class="highlight-python"><pre>is_windows - checks if we're running on windows
is_mac - checks if we're running on a mac
is_gentoo - checks if we're running on gentoo
is_bsd - checks if we're running on the bsd family of operating systems

is_available - determines if a command is available on this system
is_running - determines if a given process is running
call - runs the given system command and provides back the results

name_by_pid - gets the name for a process by the given pid
pid_by_name - gets the pid for a process by the given name
pid_by_port - gets the pid for a process listening to a given port
pid_by_open_file - gets the pid for the process with an open file
pids_by_user - provides processes owned by a user
cwd - provides the current working directory for a given process
user - provides the user a process is running under
start_time - provides the unix timestamp when the process started
tail - provides lines from the end of a file
bsd_jail_id - provides the BSD jail id a given process is running within
bsd_jail_path - provides the path of the given BSD jail

is_tarfile - checks if the given path is a tarball
expand_path - expands relative paths and ~ entries
files_with_suffix - provides files with the given suffix

get_process_name - provides our process' name
set_process_name - changes our process' name</pre>
</div>
<dl class="attribute">
<dt id="stem.util.system.argc_t">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">argc_t</tt><a class="headerlink" href="#stem.util.system.argc_t" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">LP_c_char_p</span></tt></p>
</dd></dl>

<dl class="exception">
<dt id="stem.util.system.CallError">
<em class="property">exception </em><tt class="descclassname">stem.util.system.</tt><tt class="descname">CallError</tt><big>(</big><em>msg</em>, <em>command</em>, <em>exit_status</em>, <em>runtime</em>, <em>stdout</em>, <em>stderr</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#CallError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.CallError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">exceptions.OSError</span></tt></p>
<p>Error response when making a system call. This is an <strong>OSError</strong> subclass
with additional information about the process. Depending on the nature of the
error not all of these attributes will be available.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><strong>msg</strong> (<em>str</em>) -- exception string</li>
<li><strong>command</strong> (<em>str</em>) -- command that was ran</li>
<li><strong>exit_status</strong> (<em>int</em>) -- exit code of the process</li>
<li><strong>runtime</strong> (<em>float</em>) -- time the command took to run</li>
<li><strong>stdout</strong> (<em>str</em>) -- stdout of the process</li>
<li><strong>stderr</strong> (<em>str</em>) -- stderr of the process</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.is_windows">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">is_windows</tt><big>(</big><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#is_windows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.is_windows" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if we are running on Windows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>bool</strong> to indicate if we're on Windows</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.is_mac">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">is_mac</tt><big>(</big><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#is_mac"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.is_mac" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if we are running on Mac OSX.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>bool</strong> to indicate if we're on a Mac</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.is_gentoo">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">is_gentoo</tt><big>(</big><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#is_gentoo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.is_gentoo" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if we're running on Gentoo.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>bool</strong> to indicate if we're on Gentoo</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.is_bsd">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">is_bsd</tt><big>(</big><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#is_bsd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.is_bsd" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if we are within the BSD family of operating systems. This currently
recognizes Macs, FreeBSD, and OpenBSD but may be expanded later.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>bool</strong> to indicate if we're on a BSD OS</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.is_available">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">is_available</tt><big>(</big><em>command</em>, <em>cached=True</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#is_available"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.is_available" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the current PATH to see if a command is available or not. If more
than one command is present (for instance &quot;ls -a | grep foo&quot;) then this
just checks the first.</p>
<p>Note that shell (like cd and ulimit) aren't in the PATH so this lookup will
try to assume that it's available. This only happends for recognized shell
commands (those in SHELL_COMMANDS).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>command</strong> (<em>str</em>) -- command to search for</li>
<li><strong>cached</strong> (<em>bool</em>) -- makes use of available cached results if <strong>True</strong></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>True</strong> if an executable we can use by that name exists in the
PATH, <strong>False</strong> otherwise</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.is_running">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">is_running</tt><big>(</big><em>command</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#is_running"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.is_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks for if a process with a given name is running or not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>command</strong> (<em>str</em>) -- process name to be checked</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>True</strong> if the process is running, <strong>False</strong> if it's not among ps
results, and <strong>None</strong> if ps can't be queried</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.name_by_pid">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">name_by_pid</tt><big>(</big><em>pid</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#name_by_pid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.name_by_pid" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to determine the name a given process is running under (not
including arguments). This uses...</p>
<div class="highlight-python"><pre>1. Information from /proc
2. ps -p &lt;pid&gt; -o command</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<em>int</em>) -- process id of the process to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>str</strong> with the process name, <strong>None</strong> if it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.pid_by_name">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">pid_by_name</tt><big>(</big><em>process_name</em>, <em>multiple=False</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#pid_by_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.pid_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to determine the process id for a running process, using...</p>
<div class="highlight-python"><pre>1. pgrep -x &lt;name&gt;
2. pidof &lt;name&gt;
3. ps -o pid -C &lt;name&gt; (linux)
   ps axc | egrep " &lt;name&gt;$" (bsd)
4. lsof -tc &lt;name&gt;
5. tasklist | str &lt;name&gt;.exe</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>process_name</strong> (<em>str</em>) -- process name for which to fetch the pid</li>
<li><strong>multiple</strong> (<em>bool</em>) -- provides a list of all pids if <strong>True</strong>, otherwise
results with multiple processes are discarded</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>Response depends upon the 'multiple' argument as follows...</p>
<ul class="simple">
<li>if <strong>False</strong> then this provides an <strong>int</strong> with the process id or <strong>None</strong> if it can't be determined</li>
<li>if <strong>True</strong> then this provides a <strong>list</strong> of all <strong>int</strong> process ids, and an empty list if it can't be determined</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.pid_by_port">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">pid_by_port</tt><big>(</big><em>port</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#pid_by_port"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.pid_by_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to determine the process id for a process with the given port,
using...</p>
<div class="highlight-python"><pre>1. netstat -npltu | grep 127.0.0.1:&lt;port&gt;
2. sockstat -4l -P tcp -p &lt;port&gt;
3. lsof -wnP -iTCP -sTCP:LISTEN | grep ":&lt;port&gt;"</pre>
</div>
<p>Most queries limit results to listening TCP connections. This function likely
won't work on Mac OSX.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>port</strong> (<em>int</em>) -- port where the process we're looking for is listening</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>int</strong> with the process id, <strong>None</strong> if it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.pid_by_open_file">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">pid_by_open_file</tt><big>(</big><em>path</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#pid_by_open_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.pid_by_open_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to determine the process id for a process with the given open file,
using...</p>
<div class="highlight-python"><pre>lsof -w &lt;path&gt;</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>str</em>) -- location of the socket file to query against</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>int</strong> with the process id, <strong>None</strong> if it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.pids_by_user">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">pids_by_user</tt><big>(</big><em>user</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#pids_by_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.pids_by_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides processes owned by a given user.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.5.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>user</strong> (<em>str</em>) -- user to look up processes for</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>list</strong> with the process ids, <strong>None</strong> if it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.cwd">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">cwd</tt><big>(</big><em>pid</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#cwd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.cwd" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the working directory of the given process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<em>int</em>) -- process id of the process to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>str</strong> with the absolute path for the process' present working
directory, <strong>None</strong> if it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.user">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">user</tt><big>(</big><em>pid</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.user" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the user a process is running under.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<em>int</em>) -- process id of the process to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>str</strong> with the username a process is running under, <strong>None</strong> if
it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.start_time">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">start_time</tt><big>(</big><em>pid</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#start_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.start_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the unix timestamp when the given process started.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<em>int</em>) -- process id of the process to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>float</strong> for the unix timestamp when the process began, <strong>None</strong>
if it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.tail">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">tail</tt><big>(</big><em>target</em>, <em>lines=None</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#tail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides lines of a file starting with the end. For instance,
'tail -n 50 /tmp/my_log' could be done with...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">tail</span><span class="p">(</span><span class="s">&#39;/tmp/my_log&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">)))</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>target</strong> (<em>str,file</em>) -- path or file object to read from</li>
<li><strong>lines</strong> (<em>int</em>) -- number of lines to read</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>generator</strong> that reads lines, starting with the end</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><strong>IOError</strong> if unable to read the file</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.bsd_jail_id">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">bsd_jail_id</tt><big>(</big><em>pid</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#bsd_jail_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.bsd_jail_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the jail id for a process. These seem to only exist for FreeBSD (this
style for jails does not exist on Linux, OSX, or OpenBSD).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<em>int</em>) -- process id of the jail id to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>int</strong> for the jail id, zero if this can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.bsd_jail_path">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">bsd_jail_path</tt><big>(</big><em>jid</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#bsd_jail_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.bsd_jail_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the path of the given FreeBSD jail.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jid</strong> (<em>int</em>) -- jail id to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>str</strong> of the path prefix, <strong>None</strong> if this can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.is_tarfile">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">is_tarfile</tt><big>(</big><em>path</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#is_tarfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.is_tarfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns if the path belongs to a tarfile or not.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.2.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>str</em>) -- path to be checked</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>True</strong> if the path belongs to a tarball, <strong>False</strong> otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.expand_path">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">expand_path</tt><big>(</big><em>path</em>, <em>cwd=None</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#expand_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.expand_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides an absolute path, expanding tildes with the user's home and
appending a current working directory if the path was relative.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<em>str</em>) -- path to be expanded</li>
<li><strong>cwd</strong> (<em>str</em>) -- current working directory to expand relative paths with, our
process' if this is <strong>None</strong></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>str</strong> of the path expanded to be an absolute path, never with an
ending slash</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.files_with_suffix">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">files_with_suffix</tt><big>(</big><em>base_path</em>, <em>suffix</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#files_with_suffix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.files_with_suffix" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over files in a given directory, providing filenames with a certain
suffix.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.2.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>base_path</strong> (<em>str</em>) -- directory to be iterated over</li>
<li><strong>suffix</strong> (<em>str</em>) -- filename suffix to look for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">iterator that yields the absolute path for files with the given suffix</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.call">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">call</tt><big>(</big><em>command</em>, <em>default = UNDEFINED</em>, <em>ignore_exit_status = False</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.call" title="Permalink to this definition">¶</a></dt>
<dd><p>Issues a command in a subprocess, blocking until completion and returning the
results. This is not actually ran in a shell so pipes and other shell syntax
are not permitted.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.5.0: </span>Providing additional information upon failure by raising a CallError. This
is a subclass of OSError, providing backward compatibility.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.5.0: </span>Added env argument.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>command</strong> (<em>str,list</em>) -- command to be issued</li>
<li><strong>default</strong> (<em>object</em>) -- response if the query fails</li>
<li><strong>ignore_exit_status</strong> (<em>bool</em>) -- reports failure if our command's exit status
was non-zero</li>
<li><strong>env</strong> (<em>dict</em>) -- environment variables</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>list</strong> with the lines of output from the command</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><strong>CallError</strong> if this fails and no default was provided, this is an
<strong>OSError</strong> subclass</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.get_process_name">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">get_process_name</tt><big>(</big><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#get_process_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.get_process_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the present name of our process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>str</strong> with the present name of our process</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.set_process_name">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">set_process_name</tt><big>(</big><em>process_name</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/system.html#set_process_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.system.set_process_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Renames our current process from &quot;python &lt;args&gt;&quot; to a custom name. This is
best-effort, not necessarily working on all platforms.</p>
<p><strong>Note:</strong> This might have issues on FreeBSD (<a class="reference external" href="https://trac.torproject.org/9804">ticket 9804</a>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>process_name</strong> (<em>str</em>) -- new name for our process</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.get_name_by_pid">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">get_name_by_pid</tt><big>(</big><em>pid</em><big>)</big><a class="headerlink" href="#stem.util.system.get_name_by_pid" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to determine the name a given process is running under (not
including arguments). This uses...</p>
<div class="highlight-python"><pre>1. Information from /proc
2. ps -p &lt;pid&gt; -o command</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<em>int</em>) -- process id of the process to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>str</strong> with the process name, <strong>None</strong> if it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.get_pid_by_name">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">get_pid_by_name</tt><big>(</big><em>process_name</em>, <em>multiple=False</em><big>)</big><a class="headerlink" href="#stem.util.system.get_pid_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to determine the process id for a running process, using...</p>
<div class="highlight-python"><pre>1. pgrep -x &lt;name&gt;
2. pidof &lt;name&gt;
3. ps -o pid -C &lt;name&gt; (linux)
   ps axc | egrep " &lt;name&gt;$" (bsd)
4. lsof -tc &lt;name&gt;
5. tasklist | str &lt;name&gt;.exe</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>process_name</strong> (<em>str</em>) -- process name for which to fetch the pid</li>
<li><strong>multiple</strong> (<em>bool</em>) -- provides a list of all pids if <strong>True</strong>, otherwise
results with multiple processes are discarded</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>Response depends upon the 'multiple' argument as follows...</p>
<ul class="simple">
<li>if <strong>False</strong> then this provides an <strong>int</strong> with the process id or <strong>None</strong> if it can't be determined</li>
<li>if <strong>True</strong> then this provides a <strong>list</strong> of all <strong>int</strong> process ids, and an empty list if it can't be determined</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.get_pid_by_port">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">get_pid_by_port</tt><big>(</big><em>port</em><big>)</big><a class="headerlink" href="#stem.util.system.get_pid_by_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to determine the process id for a process with the given port,
using...</p>
<div class="highlight-python"><pre>1. netstat -npltu | grep 127.0.0.1:&lt;port&gt;
2. sockstat -4l -P tcp -p &lt;port&gt;
3. lsof -wnP -iTCP -sTCP:LISTEN | grep ":&lt;port&gt;"</pre>
</div>
<p>Most queries limit results to listening TCP connections. This function likely
won't work on Mac OSX.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>port</strong> (<em>int</em>) -- port where the process we're looking for is listening</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>int</strong> with the process id, <strong>None</strong> if it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.get_pid_by_open_file">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">get_pid_by_open_file</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#stem.util.system.get_pid_by_open_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to determine the process id for a process with the given open file,
using...</p>
<div class="highlight-python"><pre>lsof -w &lt;path&gt;</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>str</em>) -- location of the socket file to query against</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>int</strong> with the process id, <strong>None</strong> if it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.get_cwd">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">get_cwd</tt><big>(</big><em>pid</em><big>)</big><a class="headerlink" href="#stem.util.system.get_cwd" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the working directory of the given process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<em>int</em>) -- process id of the process to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>str</strong> with the absolute path for the process' present working
directory, <strong>None</strong> if it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.get_user">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">get_user</tt><big>(</big><em>pid</em><big>)</big><a class="headerlink" href="#stem.util.system.get_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the user a process is running under.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<em>int</em>) -- process id of the process to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>str</strong> with the username a process is running under, <strong>None</strong> if
it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.get_start_time">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">get_start_time</tt><big>(</big><em>pid</em><big>)</big><a class="headerlink" href="#stem.util.system.get_start_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the unix timestamp when the given process started.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<em>int</em>) -- process id of the process to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>float</strong> for the unix timestamp when the process began, <strong>None</strong>
if it can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.get_bsd_jail_id">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">get_bsd_jail_id</tt><big>(</big><em>pid</em><big>)</big><a class="headerlink" href="#stem.util.system.get_bsd_jail_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the jail id for a process. These seem to only exist for FreeBSD (this
style for jails does not exist on Linux, OSX, or OpenBSD).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<em>int</em>) -- process id of the jail id to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>int</strong> for the jail id, zero if this can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.system.get_bsd_jail_path">
<tt class="descclassname">stem.util.system.</tt><tt class="descname">get_bsd_jail_path</tt><big>(</big><em>jid</em><big>)</big><a class="headerlink" href="#stem.util.system.get_bsd_jail_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the path of the given FreeBSD jail.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jid</strong> (<em>int</em>) -- jail id to be queried</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>str</strong> of the path prefix, <strong>None</strong> if this can't be determined</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


      </div>
      <div class="bottomnav">
      </div>

    <div class="footer">
    </div>
  </body>
</html>