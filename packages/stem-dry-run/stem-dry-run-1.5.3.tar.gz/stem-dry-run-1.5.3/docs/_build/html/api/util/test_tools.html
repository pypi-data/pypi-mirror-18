

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Test Utilities &mdash; Stem 1.5.2 documentation</title>
    
    <link rel="stylesheet" href="../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.5.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="top" title="Stem 1.5.2 documentation" href="../../index.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="../../_static/logo.png" alt="Logo"/><h1 class="heading"><a href="../../index.html">
          <span>Stem Docs</span></a></h1>
        <h2 class="heading"><span>Test Utilities</span></h2>
      </div>
      <div class="topnav">
      
        <p>

        <ul id="navbar">
          <li><a href="../../index.html">Home</a></li>
          <li><a href="../../tutorials.html">Tutorials</a>
            <ul>
              <li><a href="../../tutorials/the_little_relay_that_could.html">Hello World</a></li>
              <li><a href="../../tutorials/to_russia_with_love.html">Client Usage</a></li>
              <li><a href="../../tutorials/tortoise_and_the_hare.html">Event Listening</a></li>
              <li><a href="../../tutorials/over_the_river.html">Hidden Services</a></li>
              <li><a href="../../tutorials/mirror_mirror_on_the_wall.html">Tor Descriptors</a></li>
              <li><a href="../../tutorials/east_of_the_sun.html">Utilities</a></li>
              <li><a href="../../tutorials/down_the_rabbit_hole.html">Interpreter</a></li>
              <li><a href="../../tutorials/double_double_toil_and_trouble.html">Examples</a></li>
            </ul>
          </li>
          <li><a href="../../api.html">API</a>
            <ul>
              <li><a href="../control.html">stem.control</a></li>
              <li><a href="../connection.html">stem.connection</a></li>
              <li><a href="../socket.html">stem.socket</a></li>
              <li><a href="../process.html">stem.process</a></li>
              <li><a href="../response.html">stem.response</a></li>
              <li><a href="../exit_policy.html">stem.exit_policy</a></li>
              <li><a href="../version.html">stem.version</a></li>
              <li><a href="../../api.html#descriptors">Descriptors</a></li>
              <li><a href="../../api.html#utilities">Utilities</a></li>
            </ul>
          </li>
          <li><a href="https://trac.torproject.org/projects/tor/wiki/doc/stem">Development</a>
            <ul>
              <li><a href="../../faq.html">FAQ</a></li>
              <li><a href="../../change_log.html">Change Log</a></li>
              <li><a href="https://trac.torproject.org/projects/tor/wiki/doc/stem/bugs">Bug Tracker</a></li>
              <li><a href="https://trac.torproject.org/projects/tor/wiki/doc/stem">Wiki</a></li>
              <li><a href="../../download.html">Download</a></li>
            </ul>
          </li>
          <li><a href="../../faq.html#where-can-i-get-help">Contact</a>
            <ul>
              <li><a href="https://lists.torproject.org/cgi-bin/mailman/listinfo/tor-dev">Email List</a></li>
              <li><a href="https://www.torproject.org/about/contact.html.en#irc">IRC</a></li>
              <li><a href="https://www.atagar.com/contact/">Author</a></li>
            </ul>
          </li>
        </ul>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="module-stem.util.test_tools">
<span id="test-utilities"></span><h1>Test Utilities<a class="headerlink" href="#module-stem.util.test_tools" title="Permalink to this headline">¶</a></h1>
<p>Helper functions for testing.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.2.0.</span></p>
<div class="highlight-python"><pre>clean_orphaned_pyc - delete *.pyc files without corresponding *.py

is_pyflakes_available - checks if pyflakes is available
is_pycodestyle_available - checks if pycodestyle is available

stylistic_issues - checks for PEP8 and other stylistic issues
pyflakes_issues - static checks for problems via pyflakes</pre>
</div>
<dl class="class">
<dt id="stem.util.test_tools.Issue">
<em class="property">class </em><tt class="descclassname">stem.util.test_tools.</tt><tt class="descname">Issue</tt><a class="reference internal" href="../../_modules/stem/util/test_tools.html#Issue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.test_tools.Issue" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stem.util.test_tools.Issue" title="stem.util.test_tools.Issue"><tt class="xref py py-class docutils literal"><span class="pre">stem.util.test_tools.Issue</span></tt></a></p>
<p>Issue encountered by pyflakes or pycodestyle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><strong>line_number</strong> (<em>int</em>) -- line number the issue occured on</li>
<li><strong>message</strong> (<em>str</em>) -- description of the issue</li>
<li><strong>line</strong> (<em>str</em>) -- content of the line the issue is about</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.test_tools.clean_orphaned_pyc">
<tt class="descclassname">stem.util.test_tools.</tt><tt class="descname">clean_orphaned_pyc</tt><big>(</big><em>paths</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/test_tools.html#clean_orphaned_pyc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.test_tools.clean_orphaned_pyc" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes any file with a *.pyc extention without a corresponding *.py. This
helps to address a common gotcha when deleting python files...</p>
<ul class="simple">
<li>You delete module 'foo.py' and run the tests to ensure that you haven't
broken anything. They pass, however there <em>are</em> still some 'import foo'
statements that still work because the bytecode (foo.pyc) is still around.</li>
<li>You push your change.</li>
<li>Another developer clones our repository and is confused because we have a
bunch of ImportErrors.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>paths</strong> (<em>list</em>) -- paths to search for orphaned pyc files</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of absolute paths that were deleted</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.test_tools.is_pyflakes_available">
<tt class="descclassname">stem.util.test_tools.</tt><tt class="descname">is_pyflakes_available</tt><big>(</big><big>)</big><a class="reference internal" href="../../_modules/stem/util/test_tools.html#is_pyflakes_available"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.test_tools.is_pyflakes_available" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if pyflakes is availalbe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>True</strong> if we can use pyflakes and <strong>False</strong> otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.test_tools.is_pycodestyle_available">
<tt class="descclassname">stem.util.test_tools.</tt><tt class="descname">is_pycodestyle_available</tt><big>(</big><big>)</big><a class="headerlink" href="#stem.util.test_tools.is_pycodestyle_available" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if pycodestyle is availalbe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>True</strong> if we can use pycodestyle and <strong>False</strong> otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.test_tools.stylistic_issues">
<tt class="descclassname">stem.util.test_tools.</tt><tt class="descname">stylistic_issues</tt><big>(</big><em>paths</em>, <em>check_newlines=False</em>, <em>check_exception_keyword=False</em>, <em>prefer_single_quotes=False</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/test_tools.html#stylistic_issues"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.test_tools.stylistic_issues" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks for stylistic issues that are an issue according to the parts of PEP8
we conform to. You can suppress pycodestyle issues by making a 'test'
configuration that sets 'pycodestyle.ignore'.</p>
<p>For example, with a 'test/settings.cfg' of...</p>
<div class="highlight-python"><pre># pycodestyle compliance issues that we're ignoreing...
#
# * E111 and E121 four space indentations
# * E501 line is over 79 characters

pycodestyle.ignore E111
pycodestyle.ignore E121
pycodestyle.ignore E501

pycodestyle.ignore run_tests.py =&gt; E402: import stem.util.enum</pre>
</div>
<p>... you can then run tests with...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">stem.util.conf</span>

<span class="n">test_config</span> <span class="o">=</span> <span class="n">stem</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="s">&#39;test&#39;</span><span class="p">)</span>
<span class="n">test_config</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;test/settings.cfg&#39;</span><span class="p">)</span>

<span class="n">issues</span> <span class="o">=</span> <span class="n">stylistic_issues</span><span class="p">(</span><span class="s">&#39;my_project&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If a 'exclude_paths' was set in our test config then we exclude any absolute
paths matching those regexes.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.3.0: </span>Renamed from get_stylistic_issues() to stylistic_issues(). The old name
still works as an alias, but will be dropped in Stem version 2.0.0.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.4.0: </span>Changing tuples in return value to be namedtuple instances, and adding the
line that had the issue.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.4.0: </span>Added the prefer_single_quotes option.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>paths</strong> (<em>list</em>) -- paths to search for stylistic issues</li>
<li><strong>check_newlines</strong> (<em>bool</em>) -- check that we have standard newlines (n), not
windows (rn) nor classic mac (r)</li>
<li><strong>check_exception_keyword</strong> (<em>bool</em>) -- checks that we're using 'as' for
exceptions rather than a comma</li>
<li><strong>prefer_single_quotes</strong> (<em>bool</em>) -- standardize on using single rather than
double quotes for strings, when reasonable</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dict of paths list of <a class="reference internal" href="#stem.util.test_tools.Issue" title="stem.util.test_tools.Issue"><tt class="xref py py-class docutils literal"><span class="pre">stem.util.test_tools.Issue</span></tt></a> instances</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.test_tools.pyflakes_issues">
<tt class="descclassname">stem.util.test_tools.</tt><tt class="descname">pyflakes_issues</tt><big>(</big><em>paths</em><big>)</big><a class="reference internal" href="../../_modules/stem/util/test_tools.html#pyflakes_issues"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.test_tools.pyflakes_issues" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs static checks via pyflakes. False positives can be ignored via
'pyflakes.ignore' entries in our 'test' config. For instance...</p>
<div class="highlight-python"><pre>pyflakes.ignore stem/util/test_tools.py =&gt; 'pyflakes' imported but unused
pyflakes.ignore stem/util/test_tools.py =&gt; 'pycodestyle' imported but unused</pre>
</div>
<p>If a 'exclude_paths' was set in our test config then we exclude any absolute
paths matching those regexes. Issue strings can start or end with an asterisk
to match just against the prefix or suffix.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.3.0: </span>Renamed from get_pyflakes_issues() to pyflakes_issues(). The old name
still works as an alias, but will be dropped in Stem version 2.0.0.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.4.0: </span>Changing tuples in return value to be namedtuple instances, and adding the
line that had the issue.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.5.0: </span>Support matching against prefix or suffix issue strings.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>paths</strong> (<em>list</em>) -- paths to search for problems</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dict of paths list of <a class="reference internal" href="#stem.util.test_tools.Issue" title="stem.util.test_tools.Issue"><tt class="xref py py-class docutils literal"><span class="pre">stem.util.test_tools.Issue</span></tt></a> instances</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.test_tools.get_stylistic_issues">
<tt class="descclassname">stem.util.test_tools.</tt><tt class="descname">get_stylistic_issues</tt><big>(</big><em>paths</em>, <em>check_newlines=False</em>, <em>check_exception_keyword=False</em>, <em>prefer_single_quotes=False</em><big>)</big><a class="headerlink" href="#stem.util.test_tools.get_stylistic_issues" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks for stylistic issues that are an issue according to the parts of PEP8
we conform to. You can suppress pycodestyle issues by making a 'test'
configuration that sets 'pycodestyle.ignore'.</p>
<p>For example, with a 'test/settings.cfg' of...</p>
<div class="highlight-python"><pre># pycodestyle compliance issues that we're ignoreing...
#
# * E111 and E121 four space indentations
# * E501 line is over 79 characters

pycodestyle.ignore E111
pycodestyle.ignore E121
pycodestyle.ignore E501

pycodestyle.ignore run_tests.py =&gt; E402: import stem.util.enum</pre>
</div>
<p>... you can then run tests with...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">stem.util.conf</span>

<span class="n">test_config</span> <span class="o">=</span> <span class="n">stem</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="s">&#39;test&#39;</span><span class="p">)</span>
<span class="n">test_config</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;test/settings.cfg&#39;</span><span class="p">)</span>

<span class="n">issues</span> <span class="o">=</span> <span class="n">stylistic_issues</span><span class="p">(</span><span class="s">&#39;my_project&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If a 'exclude_paths' was set in our test config then we exclude any absolute
paths matching those regexes.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.3.0: </span>Renamed from get_stylistic_issues() to stylistic_issues(). The old name
still works as an alias, but will be dropped in Stem version 2.0.0.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.4.0: </span>Changing tuples in return value to be namedtuple instances, and adding the
line that had the issue.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.4.0: </span>Added the prefer_single_quotes option.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>paths</strong> (<em>list</em>) -- paths to search for stylistic issues</li>
<li><strong>check_newlines</strong> (<em>bool</em>) -- check that we have standard newlines (n), not
windows (rn) nor classic mac (r)</li>
<li><strong>check_exception_keyword</strong> (<em>bool</em>) -- checks that we're using 'as' for
exceptions rather than a comma</li>
<li><strong>prefer_single_quotes</strong> (<em>bool</em>) -- standardize on using single rather than
double quotes for strings, when reasonable</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dict of paths list of <a class="reference internal" href="#stem.util.test_tools.Issue" title="stem.util.test_tools.Issue"><tt class="xref py py-class docutils literal"><span class="pre">stem.util.test_tools.Issue</span></tt></a> instances</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.test_tools.get_pyflakes_issues">
<tt class="descclassname">stem.util.test_tools.</tt><tt class="descname">get_pyflakes_issues</tt><big>(</big><em>paths</em><big>)</big><a class="headerlink" href="#stem.util.test_tools.get_pyflakes_issues" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs static checks via pyflakes. False positives can be ignored via
'pyflakes.ignore' entries in our 'test' config. For instance...</p>
<div class="highlight-python"><pre>pyflakes.ignore stem/util/test_tools.py =&gt; 'pyflakes' imported but unused
pyflakes.ignore stem/util/test_tools.py =&gt; 'pycodestyle' imported but unused</pre>
</div>
<p>If a 'exclude_paths' was set in our test config then we exclude any absolute
paths matching those regexes. Issue strings can start or end with an asterisk
to match just against the prefix or suffix.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.3.0: </span>Renamed from get_pyflakes_issues() to pyflakes_issues(). The old name
still works as an alias, but will be dropped in Stem version 2.0.0.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.4.0: </span>Changing tuples in return value to be namedtuple instances, and adding the
line that had the issue.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.5.0: </span>Support matching against prefix or suffix issue strings.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>paths</strong> (<em>list</em>) -- paths to search for problems</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dict of paths list of <a class="reference internal" href="#stem.util.test_tools.Issue" title="stem.util.test_tools.Issue"><tt class="xref py py-class docutils literal"><span class="pre">stem.util.test_tools.Issue</span></tt></a> instances</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stem.util.test_tools.is_pep8_available">
<tt class="descclassname">stem.util.test_tools.</tt><tt class="descname">is_pep8_available</tt><big>(</big><big>)</big><a class="reference internal" href="../../_modules/stem/util/test_tools.html#is_pep8_available"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.util.test_tools.is_pep8_available" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if pycodestyle is availalbe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>True</strong> if we can use pycodestyle and <strong>False</strong> otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


      </div>
      <div class="bottomnav">
      </div>

    <div class="footer">
    </div>
  </body>
</html>