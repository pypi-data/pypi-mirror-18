

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; Trigger 1.6.rc4 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Trigger 1.6.rc4 documentation" href="index.html"/>
        <link rel="next" title="Configuration" href="configuration.html"/>
        <link rel="prev" title="Supported Platforms" href="platforms.html"/>
 
<style type="text/css">
    span.changelog-support {color: #4070A0;}
    span.changelog-bug {color: #A04040;}
    span.changelog-feature {color: #40A056;}
    a.changelog-release {font-weight: bold;}
</style>


  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Trigger
          

          
          </a>

          
            
            
              <div class="version">
                1.6.rc4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="platforms.html">Supported Platforms</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setuptools">setuptools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyasn1">PyASN1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pycrypto">PyCrypto</a></li>
<li class="toctree-l3"><a class="reference internal" href="#twisted">Twisted</a></li>
<li class="toctree-l3"><a class="reference internal" href="#redis">Redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ipy">IPy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pytz">pytz</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simpleparse">SimpleParse</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#package-tools">Package tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#other-dependencies">Other Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installing-trigger">Installing Trigger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-trigger-package">Install Trigger package</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-configuration-directory">Create configuration directory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#basic-configuration">Basic Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#copy-settings-py">Copy settings.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copy-metadata-file">Copy metadata file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copy-shared-secret-file">Copy shared secret file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copy-autoacl-py">Copy autoacl.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copy-bounce-py">Copy bounce.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#verifying-functionality">Verifying Functionality</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#netdevices">NetDevices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#acl-parser">ACL Parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="#acl-database">ACL Database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#integrated-load-queue">Integrated Load Queue</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#database-drivers">Database Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">PostgreSQL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">MySQL</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/index.html">Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Usage Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Getting Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="experimental.html">Experimental</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Trigger</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Installation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/installation.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>This is a work in progress. Please bear with us as we expand and improve this
documentation. If you have any feedback, please don&#8217;t hesitate to <a class="reference external" href="http://trigger.readthedocs.io/en/latest/index.html#getting-help">contact us</a>!!</p>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>In order for Trigger&#8217;s core functionality to work, you will need the primary
pieces of software:</p>
<ul class="simple">
<li>the Python programming language (version 2.6 or higher);</li>
<li>the <code class="docutils literal"><span class="pre">setuptools</span></code> packaging/installation library;</li>
<li>the Redis key-value server (and companion Python interface);</li>
<li>the <code class="docutils literal"><span class="pre">IPy</span></code> IP address parsing library;</li>
<li>the PyASN1 library;</li>
<li>the PyCrypto cryptography library;</li>
<li>and the Twisted event-driven networking engine.</li>
</ul>
<p>Trigger has a tricky set of dependencies. If you want to take full advantage of
all of Trigger&#8217;s functionality, you&#8217;ll need them all. If you only want to use
certain parts, you might not need them all. Each dependency will list the
components that utilize it to help you make an informed decision.</p>
<p>Please read on for important details on each dependency &#8211; there are a few
gotchas.</p>
<div class="section" id="python">
<h3>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h3>
<p>Obviously Trigger requires Python. Only version 2.6 is supported, but Python 2.7
should be just fine. There is currently no official support for Python 3.x. We
cannot yet say with confidence that we have worked out all of the legacy kinks
from when Trigger was first developed against Python 2.3.</p>
</div>
<div class="section" id="setuptools">
<h3>setuptools<a class="headerlink" href="#setuptools" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pypi.python.org/pypi/setuptools">Setuptools</a> comes with some Python installations by default; if yours doesn&#8217;t,
you&#8217;ll need to grab it. In such situations it&#8217;s typically packaged as
<code class="docutils literal"><span class="pre">python-setuptools</span></code>, <code class="docutils literal"><span class="pre">py26-setuptools</span></code> or similar. Trigger will likely drop its
setuptools dependency in the future, or include alternative support for the
<a class="reference external" href="http://pypi.python.org/pypi/distribute">Distribute</a> project, but for now setuptools is required for installation.</p>
</div>
<div class="section" id="pyasn1">
<h3>PyASN1<a class="headerlink" href="#pyasn1" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pyasn1.sourceforge.net/">PyASN1</a> is a dependency of Twisted Conch
which implements Abstract Syntax Notation One (<a class="reference external" href="http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_1x">ASN.1</a>) and is used to
encode/decode public &amp; private OpenSSH keys.</p>
</div>
<div class="section" id="pycrypto">
<h3>PyCrypto<a class="headerlink" href="#pycrypto" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.amk.ca/python/code/crypto.html">PyCrypto</a> is a dependency of
Twisted Conch which provides the low-level (C-based) encryption algorithms used to
run SSH. There are a couple gotchas associated with installing PyCrypto: its
compatibility with Python&#8217;s package tools, and the fact that it is a C-based
extension.</p>
</div>
<div class="section" id="twisted">
<h3>Twisted<a class="headerlink" href="#twisted" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://twistedmatrix.com/">Twisted</a> is huge and has a few dependencies
of its. We told you this was tricky! To make things easier, please make sure you
install the full-blown Twisted source tarball. You especially need
<a class="reference external" href="http://twistedmatrix.com/trac/wiki/TwistedConch">Twisted Conch</a>, which is
used to run SSH.</p>
<p>Used by:</p>
<ul class="simple">
<li><a class="reference internal" href="api/cmds.html#module-trigger.cmds" title="trigger.cmds"><code class="xref py py-mod docutils literal"><span class="pre">trigger.cmds</span></code></a></li>
<li><a class="reference internal" href="api/twister.html#module-trigger.twister" title="trigger.twister"><code class="xref py py-mod docutils literal"><span class="pre">trigger.twister</span></code></a></li>
</ul>
</div>
<div class="section" id="redis">
<span id="redis-install"></span><h3>Redis<a class="headerlink" href="#redis" title="Permalink to this headline">¶</a></h3>
<p>Trigger uses <a class="reference external" href="http://redis.io/download">Redis</a> as a datastore for ACL information including device
associations and the integrated change queue. Please follow the instructions
on the Redis site to get Redis running.</p>
<p>If you&#8217;re using Ubuntu, it&#8217;s as simple as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">redis</span><span class="o">-</span><span class="n">server</span>
</pre></div>
</div>
<p>The <a class="reference external" href="http://pypi.python.org/pypi/redis">Python redis</a> client is required
to interact with Redis.</p>
<p>Trigger currently assumes that you&#8217;re running Redis on localhost and on the
default port (<code class="docutils literal"><span class="pre">6379</span></code>). If you would like to change this, update
<a class="reference internal" href="configuration.html#std:setting-REDIS_HOST"><code class="xref std std-setting docutils literal"><span class="pre">REDIS_HOST</span></code></a> in <code class="docutils literal"><span class="pre">settings.py</span></code> to reflect the IP address or hostname
of your Redis instance.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may globally disable the use of Redis for loading ACL associations by
setting <a class="reference internal" href="configuration.html#std:setting-WITH_ACLS"><code class="xref std std-setting docutils literal"><span class="pre">WITH_ACLS</span></code></a> to <code class="docutils literal"><span class="pre">False</span></code>. Several libraries that interact
with devices also have a <code class="docutils literal"><span class="pre">with_acls</span></code> argument to toggle this at runtime.</p>
</div>
<p>Used by:</p>
<ul class="simple">
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.autoacl" title="trigger.acl.autoacl"><code class="xref py py-mod docutils literal"><span class="pre">trigger.acl.autoacl</span></code></a></li>
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.db" title="trigger.acl.db"><code class="xref py py-mod docutils literal"><span class="pre">trigger.acl.db</span></code></a></li>
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.tools" title="trigger.acl.tools"><code class="xref py py-mod docutils literal"><span class="pre">trigger.acl.tools</span></code></a></li>
<li><a class="reference internal" href="api/netdevices.html#module-trigger.netdevices" title="trigger.netdevices"><code class="xref py py-mod docutils literal"><span class="pre">trigger.netdevices</span></code></a></li>
</ul>
</div>
<div class="section" id="ipy">
<h3>IPy<a class="headerlink" href="#ipy" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pypi.python.org/pypi/IPy">IPy</a> is a class and tools for handling
of IPv4 and IPv6 addresses and networks. It is used by Trigger for parsing and
handling IP addresses.</p>
<p>Used by:</p>
<ul class="simple">
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.db" title="trigger.acl.db"><code class="xref py py-mod docutils literal"><span class="pre">trigger.acl.db</span></code></a></li>
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.parser" title="trigger.acl.parser"><code class="xref py py-mod docutils literal"><span class="pre">trigger.acl.parser</span></code></a></li>
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.tools" title="trigger.acl.tools"><code class="xref py py-mod docutils literal"><span class="pre">trigger.acl.tools</span></code></a></li>
<li><a class="reference internal" href="api/cmds.html#module-trigger.cmds" title="trigger.cmds"><code class="xref py py-mod docutils literal"><span class="pre">trigger.cmds</span></code></a></li>
<li><code class="xref py py-mod docutils literal"><span class="pre">trigger.conf.settings</span></code></li>
<li><a class="reference internal" href="api/netscreen.html#module-trigger.netscreen" title="trigger.netscreen"><code class="xref py py-mod docutils literal"><span class="pre">trigger.netscreen</span></code></a></li>
</ul>
</div>
<div class="section" id="pytz">
<h3>pytz<a class="headerlink" href="#pytz" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pypi.python.org/pypi/pytz">pytz</a> is an immensely powerful time zone
library for Python that allows accurate and cross platform timezone calculations.
It is used by Trigger&#8217;s change management interface to allow for strict adherance
to scheduled maintenance events.</p>
<p>Used by:</p>
<ul class="simple">
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.db" title="trigger.acl.db"><code class="xref py py-mod docutils literal"><span class="pre">trigger.acl.db</span></code></a></li>
<li><a class="reference internal" href="api/changemgmt.html#module-trigger.changemgmt" title="trigger.changemgmt"><code class="xref py py-mod docutils literal"><span class="pre">trigger.changemgmt</span></code></a></li>
<li><a class="reference internal" href="api/netdevices.html#module-trigger.netdevices" title="trigger.netdevices"><code class="xref py py-mod docutils literal"><span class="pre">trigger.netdevices</span></code></a></li>
</ul>
</div>
<div class="section" id="simpleparse">
<h3>SimpleParse<a class="headerlink" href="#simpleparse" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pypi.python.org/pypi/SimpleParse">SimpleParse</a> is an extremely fast parser
generator for Python that converts EBNF grammars into parsers. It is used by Trigger&#8217;s
ACL parser to allow us to translate ACLs from flat files into vendor-agnostic objects.</p>
<p>Used by:</p>
<ul class="simple">
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.parser" title="trigger.acl.parser"><code class="xref py py-mod docutils literal"><span class="pre">trigger.acl.parser</span></code></a></li>
</ul>
<div class="section" id="package-tools">
<h4>Package tools<a class="headerlink" href="#package-tools" title="Permalink to this headline">¶</a></h4>
<p>We strongly recommend using <a class="reference external" href="http://pypi.python.org/pypi/pip">pip</a> to install
Trigger as it is newer and generally better than <code class="docutils literal"><span class="pre">easy_install</span></code>. In either
case, these tools will automatically install of the dependencies for you
quickly and easily.</p>
</div>
</div>
<div class="section" id="other-dependencies">
<h3>Other Dependencies<a class="headerlink" href="#other-dependencies" title="Permalink to this headline">¶</a></h3>
<p>Know for now that if you want to use the integrated load queue, you may
potentially require an additional database library.</p>
<p>See <a class="reference internal" href="#db-drivers"><span class="std std-ref">Database Drivers</span></a> below for more information.</p>
</div>
</div>
<div class="section" id="installing-trigger">
<h2>Installing Trigger<a class="headerlink" href="#installing-trigger" title="Permalink to this headline">¶</a></h2>
<p>The following steps will get you the very basic functionality and will be
improved over time. As mentioned at the top of this document, if you have any
feedback or questions, please get <a class="reference external" href="http://trigger.readthedocs.io/en/latest/index.html#getting-help">get in touch</a>!</p>
<div class="section" id="install-trigger-package">
<h3>Install Trigger package<a class="headerlink" href="#install-trigger-package" title="Permalink to this headline">¶</a></h3>
<p>Using <a class="reference external" href="http://pypi.python.org/pypi/pip">pip</a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">trigger</span>
</pre></div>
</div>
<p>From source (which will use <code class="docutils literal"><span class="pre">easy_install</span></code>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
</div>
<div class="section" id="create-configuration-directory">
<h3>Create configuration directory<a class="headerlink" href="#create-configuration-directory" title="Permalink to this headline">¶</a></h3>
<p>Trigger expects to find its configuration files to be in <code class="docutils literal"><span class="pre">/etc/trigger</span></code>. This
can be customized using the <a class="reference internal" href="configuration.html#std:setting-PREFIX"><code class="xref std std-setting docutils literal"><span class="pre">PREFIX</span></code></a> configuration variable within
<code class="docutils literal"><span class="pre">settings.py</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trigger</span>
</pre></div>
</div>
<p>That&#8217;s it! Now you&#8217;re ready to configure Trigger.</p>
</div>
</div>
<div class="section" id="basic-configuration">
<h2>Basic Configuration<a class="headerlink" href="#basic-configuration" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">For these steps you&#8217;ll need to download the <a class="reference external" href="https://github.com/trigger/trigger/tarball/develop">Trigger tarball</a>, expand it, and then
navigate to the root directory (the same directory in which you&#8217;ll find
<code class="docutils literal"><span class="pre">setup.py</span></code>).</p>
</div>
<div class="section" id="copy-settings-py">
<h3>Copy settings.py<a class="headerlink" href="#copy-settings-py" title="Permalink to this headline">¶</a></h3>
<p>Trigger expects <code class="docutils literal"><span class="pre">settings.py</span></code> to be in <code class="docutils literal"><span class="pre">/etc/trigger</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">cp</span> <span class="n">configs</span><span class="o">/</span><span class="n">trigger_settings</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trigger</span><span class="o">/</span><span class="n">settings</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>If you really don&#8217;t like this, you may override the default location by setting
the environment variable <code class="docutils literal"><span class="pre">TRIGGER_SETTINGS</span></code> to the desired location. If you
go this route, you must make sure all Trigger-based tools have this set prior
to any imports!</p>
</div>
<div class="section" id="copy-metadata-file">
<h3>Copy metadata file<a class="headerlink" href="#copy-metadata-file" title="Permalink to this headline">¶</a></h3>
<p>Trigger&#8217;s <a class="reference internal" href="api/netdevices.html#module-trigger.netdevices" title="trigger.netdevices"><code class="xref py py-obj docutils literal"><span class="pre">netdevices</span></code></a> module expects to find the device metadata file
in <a class="reference internal" href="configuration.html#std:setting-PREFIX"><code class="xref std std-setting docutils literal"><span class="pre">PREFIX</span></code></a>. This file provides Trigger with information about your
devices and is at the core of Trigger’s device interaction. Anything that
communicates with devices relies on the metadata stored within this file.</p>
<p>For the purpose of basic config, we&#8217;ll just use the sample <code class="docutils literal"><span class="pre">netdevices.json</span></code> file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">cp</span> <span class="n">configs</span><span class="o">/</span><span class="n">netdevices</span><span class="o">.</span><span class="n">json</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trigger</span><span class="o">/</span><span class="n">netdevices</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>For more information on how Trigger uses the netdevices file please see
<a class="reference internal" href="usage/netdevices.html"><span class="doc">Working with NetDevices</span></a>.</p>
</div>
<div class="section" id="copy-shared-secret-file">
<h3>Copy shared secret file<a class="headerlink" href="#copy-shared-secret-file" title="Permalink to this headline">¶</a></h3>
<p>By default, Trigger&#8217;s <a class="reference internal" href="api/tacacsrc.html#module-trigger.tacacsrc" title="trigger.tacacsrc"><code class="xref py py-obj docutils literal"><span class="pre">tacacsrc</span></code></a> module expects to find <code class="docutils literal"><span class="pre">.tackf</span></code> in
the <a class="reference internal" href="configuration.html#std:setting-PREFIX"><code class="xref std std-setting docutils literal"><span class="pre">PREFIX</span></code></a>. This is the location of the file that contains the
passphrase used for the symettric encryption of user credentials within the
<code class="docutils literal"><span class="pre">.tacacsrc</span></code> file. For starters, just use the sample file provided in the
Trigger distribution:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">cp</span> <span class="n">tests</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">tackf</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trigger</span><span class="o">/.</span><span class="n">tackf</span>
</pre></div>
</div>
<p>If you&#8217;re using a non-standard location, be sure to update the
<a class="reference internal" href="configuration.html#std:setting-TACACSRC_KEYFILE"><code class="xref std std-setting docutils literal"><span class="pre">TACACSRC_KEYFILE</span></code></a> configuration variable within <code class="docutils literal"><span class="pre">settings.py</span></code> with the
location of <code class="docutils literal"><span class="pre">.tackf</span></code>!</p>
<p>For more information on how Trigger uses encryption to protect credentials
please see <a class="reference internal" href="usage/tacacsrc.html"><span class="doc">Managing Credentials with .tacacsrc</span></a>.</p>
</div>
<div class="section" id="copy-autoacl-py">
<h3>Copy autoacl.py<a class="headerlink" href="#copy-autoacl-py" title="Permalink to this headline">¶</a></h3>
<p>Trigger&#8217;s <a class="reference internal" href="api/acl.html#module-trigger.acl.autoacl" title="trigger.acl.autoacl"><code class="xref py py-obj docutils literal"><span class="pre">autoacl</span></code></a> module expects to find <code class="docutils literal"><span class="pre">autoacl.py</span></code> in the
<a class="reference internal" href="configuration.html#std:setting-PREFIX"><code class="xref std std-setting docutils literal"><span class="pre">PREFIX</span></code></a>. This is used to customize the automatic ACL associations for
network devices.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">cp</span> <span class="n">configs</span><span class="o">/</span><span class="n">autoacl</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trigger</span><span class="o">/</span><span class="n">autoacl</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>If you&#8217;re using a non-standard location, be sure to update the
<a class="reference internal" href="configuration.html#std:setting-AUTOACL_FILE"><code class="xref std std-setting docutils literal"><span class="pre">AUTOACL_FILE</span></code></a> configuration variable within <code class="docutils literal"><span class="pre">settings.py</span></code> with the
location of <code class="docutils literal"><span class="pre">autoacl.py</span></code>!</p>
</div>
<div class="section" id="copy-bounce-py">
<h3>Copy bounce.py<a class="headerlink" href="#copy-bounce-py" title="Permalink to this headline">¶</a></h3>
<p>Trigger&#8217;s <a class="reference internal" href="api/changemgmt.html#trigger.changemgmt.bounce" title="trigger.changemgmt.bounce"><code class="xref py py-obj docutils literal"><span class="pre">bounce</span></code></a> module expects to find <code class="docutils literal"><span class="pre">bounce.py</span></code> in
the <a class="reference internal" href="configuration.html#std:setting-PREFIX"><code class="xref std std-setting docutils literal"><span class="pre">PREFIX</span></code></a>. This module controls how change management (aka
maintenance or &#8220;bounce&#8221;) windows get auto-applied to network devices.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">cp</span> <span class="n">configs</span><span class="o">/</span><span class="n">bounce</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trigger</span><span class="o">/</span><span class="n">bounce</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>If you&#8217;re using a non-standard location, be sure to update the
<a class="reference internal" href="configuration.html#std:setting-BOUNCE_FILE"><code class="xref std std-setting docutils literal"><span class="pre">BOUNCE_FILE</span></code></a> configuration variable within <code class="docutils literal"><span class="pre">settings.py</span></code> with the
location of <code class="docutils literal"><span class="pre">bounce.py</span></code>!</p>
</div>
</div>
<div class="section" id="verifying-functionality">
<h2>Verifying Functionality<a class="headerlink" href="#verifying-functionality" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">For these steps you&#8217;ll still need to be at the root directory of the
<a class="reference external" href="https://github.com/trigger/trigger/tarball/develop">Trigger tarball</a>. If
you haven&#8217;t already, download it,  expand it, and then navigate to the root
directory (the same directory in which you&#8217;ll find <code class="docutils literal"><span class="pre">setup.py</span></code>).</p>
</div>
<p>Once the dependencies are installed, fire up your trusty Python interpreter in
interactive mode and try doing stuff.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>Throughout this documentation you will see commands or code preceded by
a triple greater-than prompt (<code class="docutils literal"><span class="pre">&gt;&gt;&gt;</span></code>). This indicates that they are being
entered into a Python interpreter in <em>interactive mode</em>.</p>
<p>To start Python in <em>interactive mode</em>, it&#8217;s as simple as executing
<code class="docutils literal"><span class="pre">python</span></code> from a command prompt:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">python</span>
<span class="n">Python</span> <span class="mf">2.7</span><span class="o">.</span><span class="mi">2</span> <span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">Jun</span> <span class="mi">20</span> <span class="mi">2012</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">33</span><span class="p">)</span>
<span class="n">Type</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;copyright&quot;</span><span class="p">,</span> <span class="s2">&quot;credits&quot;</span> <span class="ow">or</span> <span class="s2">&quot;license&quot;</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span><span class="o">.</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p class="last">For more information, please see the <a class="reference external" href="http://docs.python.org/tutorial/interpreter.html#interactive-mode">official Python documentation on
interactive mode</a>.</p>
</div>
<div class="section" id="netdevices">
<h3>NetDevices<a class="headerlink" href="#netdevices" title="Permalink to this headline">¶</a></h3>
<p>Try instantiating NetDevices, which holds your device metadata:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.netdevices</span> <span class="k">import</span> <span class="n">NetDevices</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nd</span> <span class="o">=</span> <span class="n">NetDevices</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span> <span class="o">=</span> <span class="n">nd</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;test1-abc.net.aol.com&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="acl-parser">
<h3>ACL Parser<a class="headerlink" href="#acl-parser" title="Permalink to this headline">¶</a></h3>
<p>Try parsing an ACL using the ACL parser (the <code class="xref py py-obj docutils literal"><span class="pre">tests</span></code> directory can be found
within the Trigger distribution):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.acl</span> <span class="k">import</span> <span class="n">parse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">acl</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;tests/data/acl.test&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">acl</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span>
<span class="go">103</span>
</pre></div>
</div>
</div>
<div class="section" id="acl-database">
<h3>ACL Database<a class="headerlink" href="#acl-database" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This WILL NOT work without <a class="reference internal" href="#redis-install"><span class="std std-ref">Redis</span></a> installed and
<a class="reference internal" href="configuration.html#std:setting-WITH_ACLS"><code class="xref std std-setting docutils literal"><span class="pre">WITH_ACLS</span></code></a> set to <code class="docutils literal"><span class="pre">True</span></code>. If you have ACL support disabled, just
skip this section.</p>
</div>
<p>Try loading the AclsDB to inspect automatic associations. First directly from autoacl:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.acl.autoacl</span> <span class="k">import</span> <span class="n">autoacl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">autoacl</span><span class="p">(</span><span class="n">dev</span><span class="p">)</span>
<span class="go">set([&#39;juniper-router.policer&#39;, &#39;juniper-router-protect&#39;])</span>
</pre></div>
</div>
<p>And then inherited from autoacl by AclsDB:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.acl.db</span> <span class="k">import</span> <span class="n">AclsDB</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">AclsDB</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">get_acl_set</span><span class="p">(</span><span class="n">dev</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span><span class="o">.</span><span class="n">implicit_acls</span>
<span class="go">set([&#39;juniper-router.policer&#39;, &#39;juniper-router-protect&#39;])</span>
</pre></div>
</div>
<p>Now that you&#8217;ve properly installed Trigger, you might want to know how to use it.
Please have a look at the <a class="reference internal" href="usage/index.html"><span class="doc">Usage Guide</span></a>.</p>
</div>
</div>
<div class="section" id="integrated-load-queue">
<h2>Integrated Load Queue<a class="headerlink" href="#integrated-load-queue" title="Permalink to this headline">¶</a></h2>
<p>Trigger currently uses a database for the automated ACL load queue used by the
<code class="docutils literal"><span class="pre">load_acl</span></code> and <code class="docutils literal"><span class="pre">acl</span></code> utilities.</p>
<p>The supported databases are <a class="reference external" href="http://www.mysql.com/">MySQL</a>, <a class="reference external" href="http://www.postgresql.org/">PostgreSQL</a>, and <a class="reference external" href="http://sqlite.org">SQLite</a>.</p>
<p>SQLite is the easiest to get running because generally this module is part of
the Python standard library, and the database can be a simple file on your
system.</p>
<p>It&#8217;s probably best to create a unique database and database user for this
purpose, but we&#8217;ll leave that up to you.</p>
<p>If you want to use this functionality, you will need to do the following:</p>
<ul class="simple">
<li>Choose your database solution</li>
<li>Create a database on it to be used by the load queue</li>
<li>If you&#8217;re not using SQLite, ensure you have the database driver installed</li>
<li>Specify your database settings in <code class="docutils literal"><span class="pre">settings.py</span></code></li>
<li>Run the <code class="docutils literal"><span class="pre">init_task_db</span></code> tool</li>
<li>Profit!</li>
</ul>
<div class="section" id="database-drivers">
<span id="db-drivers"></span><h3>Database Drivers<a class="headerlink" href="#database-drivers" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are using <code class="docutils literal"><span class="pre">sqlite3</span></code> you may ignore this section as the driver is
included in the Python standard library.</p>
</div>
<p>Some of the database libraries are Python C extensions and so will expect
<code class="docutils literal"><span class="pre">gcc</span></code> and a number of development libraries to be available on your system.</p>
<p>Generally you will need the development headers for Python and OpenSSL as well
as the development libraries for the database you&#8217;re using.</p>
<div class="section" id="id11">
<h4>PostgreSQL<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>Your only choice is <a class="reference external" href="https://pypi.python.org/pypi/psycopg2">psycopg2</a>. This is a
Python C extension which requires compilation.</p>
<p>Here are some tips to install the library dependencies:</p>
<dl class="docutils">
<dt>Ubuntu</dt>
<dd><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">libpq-dev</span> <span class="pre">libssl-dev</span> <span class="pre">python-dev</span></code></dd>
<dt>CentOS/RedHat</dt>
<dd><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">yum</span> <span class="pre">install</span> <span class="pre">postgresql-devel</span> <span class="pre">openssl-devel</span> <span class="pre">python-devel</span></code></dd>
</dl>
</div>
<div class="section" id="id12">
<h4>MySQL<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>For MySQL you have two choices:</p>
<ol class="arabic simple">
<li><a class="reference external" href="https://pypi.python.org/pypi/PyMySQL">PyMySQL</a>, a pure Python MySQL driver.</li>
<li><a class="reference external" href="https://pypi.python.org/pypi/MySQL-python">MySQL-python</a>. This is a
Python C extension which requires compilation.</li>
</ol>
<p>If you&#8217;re using MySQL-python, here are some tips to install the library
dependencies:</p>
<dl class="docutils">
<dt>Ubuntu</dt>
<dd><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">libmysqlclient-dev</span> <span class="pre">libssl-dev</span> <span class="pre">python-dev</span></code></dd>
<dt>CentOS/RedHat</dt>
<dd><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">yum</span> <span class="pre">install</span> <span class="pre">mysql-devel</span> <span class="pre">openssl-devel</span> <span class="pre">python-devel</span></code></dd>
</dl>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configuration.html" class="btn btn-neutral float-right" title="Configuration" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="platforms.html" class="btn btn-neutral" title="Supported Platforms" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2006-2016, AOL Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.6.rc4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>