

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>trigger.netdevices — Network device metadata library &mdash; Trigger 1.6.rc4 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Trigger 1.6.rc4 documentation" href="../index.html"/>
        <link rel="up" title="API Documentation" href="index.html"/>
        <link rel="next" title="trigger.netscreen — Juniper NetScreen firewall parser" href="netscreen.html"/>
        <link rel="prev" title="trigger.gorc — Determine commands to run upon login" href="gorc.html"/>
 
<style type="text/css">
    span.changelog-support {color: #4070A0;}
    span.changelog-bug {color: #A04040;}
    span.changelog-feature {color: #40A056;}
    a.changelog-release {font-weight: bold;}
</style>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Trigger
          

          
          </a>

          
            
            
              <div class="version">
                1.6.rc4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platforms.html">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Usage Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="acl.html"><code class="docutils literal"><span class="pre">trigger.acl</span></code> &#8212; ACL parsing library</a></li>
<li class="toctree-l2"><a class="reference internal" href="changemgmt.html"><code class="docutils literal"><span class="pre">trigger.changemgmt</span></code> &#8212; Change management library</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmds.html"><code class="docutils literal"><span class="pre">trigger.cmds</span></code> &#8212; Command execution library</a></li>
<li class="toctree-l2"><a class="reference internal" href="conf.html"><code class="docutils literal"><span class="pre">trigger.conf</span></code> &#8212; Configuration &amp; Settings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="contrib.html"><code class="docutils literal"><span class="pre">trigger.contrib</span></code> &#8212; Extra, optional tools that solve common problems, extend, or modify core functionality.</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html"><code class="docutils literal"><span class="pre">trigger.exceptions</span></code> &#8212; Trigger&#8217;s Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="gorc.html"><code class="docutils literal"><span class="pre">trigger.gorc</span></code> &#8212; Determine commands to run upon login</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal"><span class="pre">trigger.netdevices</span></code> &#8212; Network device metadata library</a></li>
<li class="toctree-l2"><a class="reference internal" href="netscreen.html"><code class="docutils literal"><span class="pre">trigger.netscreen</span></code> &#8212; Juniper NetScreen firewall parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="rancid.html"><code class="docutils literal"><span class="pre">trigger.rancid</span></code> &#8212; RANCID Compatibility Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="tacacsrc.html"><code class="docutils literal"><span class="pre">trigger.tacacsrc</span></code> &#8212; Network credentials library</a></li>
<li class="toctree-l2"><a class="reference internal" href="twister.html"><code class="docutils literal"><span class="pre">trigger.twister</span></code> &#8212; Asynchronous device interaction library</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html"><code class="docutils literal"><span class="pre">trigger.utils</span></code> &#8212; CLI tools and utilities library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Getting Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experimental.html">Experimental</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Trigger</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">API Documentation</a> &raquo;</li>
      
    <li><code class="docutils literal"><span class="pre">trigger.netdevices</span></code> &#8212; Network device metadata library</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/netdevices.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-trigger.netdevices">
<span id="trigger-netdevices-network-device-metadata-library"></span><h1><a class="reference internal" href="#module-trigger.netdevices" title="trigger.netdevices"><code class="xref py py-mod docutils literal"><span class="pre">trigger.netdevices</span></code></a> &#8212; Network device metadata library<a class="headerlink" href="#module-trigger.netdevices" title="Permalink to this headline">¶</a></h1>
<p>The heart and soul of Trigger, NetDevices is an abstract interface to network
device metadata and ACL associations.</p>
<p>Parses <a class="reference internal" href="../configuration.html#std:setting-NETDEVICES_SOURCE"><code class="xref std std-setting docutils literal"><span class="pre">NETDEVICES_SOURCE</span></code></a> and makes available a dictionary of
<a class="reference internal" href="#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><code class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></code></a> objects, which is keyed by the FQDN of every
network device.</p>
<p>Other interfaces are non-public.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.netdevices</span> <span class="k">import</span> <span class="n">NetDevices</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nd</span> <span class="o">=</span> <span class="n">NetDevices</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span> <span class="o">=</span> <span class="n">nd</span><span class="p">[</span><span class="s1">&#39;test1-abc.net.aol.com&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span><span class="o">.</span><span class="n">vendor</span><span class="p">,</span> <span class="n">dev</span><span class="o">.</span><span class="n">make</span>
<span class="go">(&lt;Vendor: Juniper&gt;, &#39;MX960-BASE-AC&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span><span class="o">.</span><span class="n">bounce</span><span class="o">.</span><span class="n">next_ok</span><span class="p">(</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
<span class="go">datetime.datetime(2010, 4, 9, 9, 0, tzinfo=&lt;UTC&gt;)</span>
</pre></div>
</div>
<dl class="function">
<dt id="trigger.netdevices.device_match">
<code class="descclassname">trigger.netdevices.</code><code class="descname">device_match</code><span class="sig-paren">(</span><em>name</em>, <em>production_only=True</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.device_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a matching <a class="reference internal" href="#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><code class="xref py py-class docutils literal"><span class="pre">NetDevice</span></code></a> object based on
partial name. Return <code class="xref py py-obj docutils literal"><span class="pre">None</span></code> if no match or if multiple matches is
cancelled:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">device_match</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="go">2 possible matches found for &#39;test&#39;:</span>
<span class="go">  [ 1] test1-abc.net.aol.com</span>
<span class="go">  [ 2] test2-abc.net.aol.com</span>
<span class="go">  [ 0] Exit</span>

<span class="go">Enter a device number: 2</span>
<span class="go">&lt;NetDevice: test2-abc.net.aol.com&gt;</span>
</pre></div>
</div>
<p>If there is only a single match, that device object is returned without
a prompt:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">device_match</span><span class="p">(</span><span class="s1">&#39;fw&#39;</span><span class="p">)</span>
<span class="go">Matched &#39;fw1-xyz.net.aol.com&#39;.</span>
<span class="go">&lt;NetDevice: fw1-xyz.net.aol.com&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="trigger.netdevices.NetDevice">
<em class="property">class </em><code class="descclassname">trigger.netdevices.</code><code class="descname">NetDevice</code><span class="sig-paren">(</span><em>data=None</em>, <em>with_acls=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice" title="Permalink to this definition">¶</a></dt>
<dd><p>An object that represents a distinct network device and its metadata.</p>
<p>Almost all of the attributes are populated by
<code class="xref py py-obj docutils literal"><span class="pre">_populate()</span></code> and are mostly dependent upon the source
data. This is prone to implementation problems and should be revisited in
the long-run as there are certain fields that are baked into the core
functionality of Trigger.</p>
<p>Users usually won&#8217;t create these objects directly! Rely instead upon
<code class="xref py py-obj docutils literal"><span class="pre">NetDevices</span></code> to do this for you.</p>
<dl class="method">
<dt id="trigger.netdevices.NetDevice.allowable">
<code class="descname">allowable</code><span class="sig-paren">(</span><em>action</em>, <em>when=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.allowable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether it&#8217;s okay to perform the specified <code class="docutils literal"><span class="pre">action</span></code>.</p>
<p>False means a bounce window conflict. For now <code class="docutils literal"><span class="pre">'load-acl'</span></code> is the
only valid action and moratorium status is not checked.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>action</strong> &#8211; The action to check.</li>
<li><strong>when</strong> &#8211; A datetime object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.can_ssh_async">
<code class="descname">can_ssh_async</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.can_ssh_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I enabled to use SSH async?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.can_ssh_pty">
<code class="descname">can_ssh_pty</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.can_ssh_pty" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I enabled to use SSH pty?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close an open <a class="reference internal" href="#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><code class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></code></a> object.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.dump">
<code class="descname">dump</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints details for a device.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.has_ssh">
<code class="descname">has_ssh</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.has_ssh" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I even listening on SSH?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_brocade_vdx">
<code class="descname">is_brocade_vdx</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_brocade_vdx" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I a Brocade VDX switch?</p>
<p>This is used to account for the disparity between the Brocade FCX
switches (which behave like Foundry devices) and the Brocade VDX
switches (which behave differently from classic Foundry devices).</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_cisco_asa">
<code class="descname">is_cisco_asa</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_cisco_asa" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I a Cisco ASA Firewall?</p>
<p>This is used to account for slight differences in the commands that
may be used between Cisco&#8217;s ASA and IOS platforms. Cisco ASA is still
very IOS-like, but there are still several gotcha&#8217;s between the
platforms.</p>
<p>Will return True if vendor is Cisco and platform is Firewall. This
is to allow operability if using .csv NetDevices and pretty safe to
assume considering ASA (was PIX) are Cisco&#8217;s flagship(if not only)
Firewalls.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_cisco_nexus">
<code class="descname">is_cisco_nexus</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_cisco_nexus" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I a Cisco Nexus device?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_cumulus">
<code class="descname">is_cumulus</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_cumulus" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I running Cumulus?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_firewall">
<code class="descname">is_firewall</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_firewall" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I a firewall?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_ioslike">
<code class="descname">is_ioslike</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_ioslike" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I an IOS-like device (as determined by <a class="reference internal" href="../configuration.html#std:setting-IOSLIKE_VENDORS"><code class="xref std std-setting docutils literal"><span class="pre">IOSLIKE_VENDORS</span></code></a>)?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_netscaler">
<code class="descname">is_netscaler</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_netscaler" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I a NetScaler?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_netscreen">
<code class="descname">is_netscreen</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_netscreen" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I a NetScreen running ScreenOS?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_pica8">
<code class="descname">is_pica8</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_pica8" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I a Pica8?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_reachable">
<code class="descname">is_reachable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_reachable" title="Permalink to this definition">¶</a></dt>
<dd><p>Do I respond to a ping?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_router">
<code class="descname">is_router</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_router" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I a router?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.is_switch">
<code class="descname">is_switch</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.is_switch" title="Permalink to this definition">¶</a></dt>
<dd><p>Am I a switch?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.next_ok">
<code class="descname">next_ok</code><span class="sig-paren">(</span><em>action</em>, <em>when=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.next_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next time at or after the specified time (default now)
that it will be ok to perform the specified action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>action</strong> &#8211; The action to check.</li>
<li><strong>when</strong> &#8211; A datetime object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.open">
<code class="descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Open new session with <a class="reference internal" href="#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><code class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></code></a>.</p>
<dl class="docutils">
<dt>Example:</dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nd</span> <span class="o">=</span> <span class="n">NetDevices</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span> <span class="o">=</span> <span class="n">nd</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;arista-sw1.demo.local&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.run_channeled_commands">
<code class="descname">run_channeled_commands</code><span class="sig-paren">(</span><em>commands</em>, <em>on_error=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.run_channeled_commands" title="Permalink to this definition">¶</a></dt>
<dd><p>Public method for scheduling commands onto device.</p>
<p>This variant allows for efficient multiplexing of commands across multiple vty
lines where supported ie Arista and Cumulus.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>commands</strong> (<a class="reference internal" href="acl.html#trigger.acl.queue.Queue.list" title="trigger.acl.queue.Queue.list"><em>list</em></a>) &#8211; List containing commands to schedule onto device loop.</li>
<li><strong>on_error</strong> (<em>func</em>) &#8211; Error handler</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span><span class="o">.</span><span class="n">run_channeled_commands</span><span class="p">([</span><span class="s1">&#39;show ip int brief&#39;</span><span class="p">,</span> <span class="s1">&#39;show version&#39;</span><span class="p">],</span> <span class="n">on_error</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">handle</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevice.run_commands">
<code class="descname">run_commands</code><span class="sig-paren">(</span><em>commands</em>, <em>on_error=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevice.run_commands" title="Permalink to this definition">¶</a></dt>
<dd><p>Public method for scheduling commands onto device.</p>
<p>Default implementation that schedules commands onto a Device loop.
This implementation ensures commands are executed sequentially.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>commands</strong> (<a class="reference internal" href="acl.html#trigger.acl.queue.Queue.list" title="trigger.acl.queue.Queue.list"><em>list</em></a>) &#8211; List containing commands to schedule onto device loop.</li>
<li><strong>on_error</strong> (<em>func</em>) &#8211; Error handler</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span><span class="o">.</span><span class="n">run_commands</span><span class="p">([</span><span class="s1">&#39;show ip int brief&#39;</span><span class="p">,</span> <span class="s1">&#39;show version&#39;</span><span class="p">],</span> <span class="n">on_error</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">handle</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.netdevices.Vendor">
<em class="property">class </em><code class="descclassname">trigger.netdevices.</code><code class="descname">Vendor</code><span class="sig-paren">(</span><em>manufacturer=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.Vendor" title="Permalink to this definition">¶</a></dt>
<dd><p>Map a manufacturer name to Trigger&#8217;s canonical name.</p>
<p>Given a manufacturer name like &#8216;CISCO SYSTEMS&#8217;, this will attempt to map it
to the canonical vendor name specified in <code class="docutils literal"><span class="pre">settings.VENDOR_MAP</span></code>. If this
can&#8217;t be done, attempt to split the name up (&#8216;CISCO, &#8216;SYSTEMS&#8217;) and see if
any of the words map. An exception is raised as a last resort.</p>
<p>This exposes a normalized name that can be used in the event of a
multi-word canonical name.</p>
<dl class="method">
<dt id="trigger.netdevices.Vendor.determine_vendor">
<code class="descname">determine_vendor</code><span class="sig-paren">(</span><em>manufacturer</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.Vendor.determine_vendor" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to turn the provided vendor name into the cname.</p>
</dd></dl>

<dl class="attribute">
<dt id="trigger.netdevices.Vendor.normalized">
<code class="descname">normalized</code><a class="headerlink" href="#trigger.netdevices.Vendor.normalized" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the normalized name for the vendor.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.netdevices.NetDevices">
<em class="property">class </em><code class="descclassname">trigger.netdevices.</code><code class="descname">NetDevices</code><span class="sig-paren">(</span><em>production_only=True</em>, <em>with_acls=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an immutable Singleton dictionary of
<a class="reference internal" href="#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><code class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></code></a> objects.</p>
<p>By default it will only return devices for which
<code class="docutils literal"><span class="pre">adminStatus=='PRODUCTION'</span></code>.</p>
<p>There are hardly any use cases where <code class="docutils literal"><span class="pre">NON-PRODUCTION</span></code> devices are needed,
and it can cause real bugs of two sorts:</p>
<blockquote>
<div><ol class="arabic simple">
<li>trying to contact unreachable devices and reporting spurious failures,</li>
<li>hot spares with the same <code class="docutils literal"><span class="pre">nodeName</span></code>.</li>
</ol>
</div></blockquote>
<p>You may override this by passing <code class="docutils literal"><span class="pre">production_only=False</span></code>.</p>
<dl class="class">
<dt id="trigger.netdevices.NetDevices._actual">
<em class="property">class </em><code class="descname">_actual</code><span class="sig-paren">(</span><em>production_only=True</em>, <em>with_acls=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices._actual" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the real class that stays active upon instantiation. All
attributes are inherited by NetDevices from this object. This means you
do NOT reference <code class="docutils literal"><span class="pre">_actual</span></code> itself, and instead call the methods from
the parent object.</p>
<p>Right:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nd</span> <span class="o">=</span> <span class="n">NetDevices</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nd</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;fw&#39;</span><span class="p">)</span>
<span class="go">[&lt;NetDevice: fw1-xyz.net.aol.com&gt;]</span>
</pre></div>
</div>
<p>Wrong:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nd</span><span class="o">.</span><span class="n">_actual</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;fw&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">unbound method match() must be called with _actual</span>
<span class="go">instance as first argument (got str instance instead)</span>
</pre></div>
</div>
<dl class="method">
<dt id="trigger.netdevices.NetDevices._actual.add_device">
<code class="descname">add_device</code><span class="sig-paren">(</span><em>device</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices._actual.add_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a device object to the store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>device</strong> &#8211; <a class="reference internal" href="#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><code class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></code></a> object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevices._actual.all">
<code class="descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices._actual.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all NetDevice objects.</p>
<p>This method can be overloaded in NetDevices loader plugins to
customize the behavior as dictated by the plugin.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevices._actual.find">
<code class="descname">find</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices._actual.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Return either the exact nodename, or a unique dot-delimited
prefix.  For example, if there is a node &#8216;test1-abc.net.aol.com&#8217;,
then any of find(&#8216;test1-abc&#8217;) or find(&#8216;test1-abc.net&#8217;) or
find(&#8216;test1-abc.net.aol.com&#8217;) will match, but not find(&#8216;test1&#8217;).</p>
<p>This method can be overloaded in NetDevices loader plugins to
customize the behavior as dictated by the plugin.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> (<em>string</em>) &#8211; Hostname prefix to find.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">NetDevice object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevices._actual.get_devices_by_type">
<code class="descname">get_devices_by_type</code><span class="sig-paren">(</span><em>devtype</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices._actual.get_devices_by_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of NetDevice objects with deviceType matching type.</p>
<p>Known deviceTypes: [&#8216;FIREWALL&#8217;, &#8216;ROUTER&#8217;, &#8216;SWITCH&#8217;]</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevices._actual.list_firewalls">
<code class="descname">list_firewalls</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices._actual.list_firewalls" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of NetDevice objects with deviceType of FIREWALL</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevices._actual.list_routers">
<code class="descname">list_routers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices._actual.list_routers" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of NetDevice objects with deviceType of ROUTER</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevices._actual.list_switches">
<code class="descname">list_switches</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices._actual.list_switches" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of NetDevice objects with deviceType of SWITCH</p>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevices._actual.match">
<code class="descname">match</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices._actual.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to match values to all keys in &#64;kwargs by dynamically
building a list comprehension. Will throw errors if the keys don&#8217;t
match legit NetDevice attributes.</p>
<p>Keys and values are case IN-senstitive. Matches against non-string
values will FAIL.</p>
<p>This method can be overloaded in NetDevices loader plugins to
customize the behavior as dictated by the plugin. If
<code class="docutils literal"><span class="pre">skip_loader=True</span></code> the built-in method will be used instead.</p>
<p>Example by reference:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nd</span> <span class="o">=</span> <span class="n">NetDevices</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;onCallName&#39;</span><span class="p">:</span><span class="s1">&#39;Data Center&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">:</span><span class="s1">&#39;FCSLB&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mydevices</span> <span class="o">=</span> <span class="n">nd</span><span class="p">(</span><span class="o">**</span><span class="n">myargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Example by keyword arguments:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mydevices</span> <span class="o">=</span> <span class="n">nd</span><span class="p">(</span><span class="n">oncallname</span><span class="o">=</span><span class="s1">&#39;data center&#39;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s1">&#39;fcslb&#39;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of NetDevice objects</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevices._actual.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>token</em>, <em>field='nodeName'</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices._actual.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of NetDevice objects where other is in
<code class="docutils literal"><span class="pre">dev.nodeName</span></code>. The getattr call in the search will allow a
<code class="docutils literal"><span class="pre">AttributeError</span></code> from a bogus field lookup so that you
don&#8217;t get an empty list thinking you performed a legit query.</p>
<p>For example, this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&gt;&gt;&gt; field = &#39;bacon&#39;
&gt;&gt;&gt; [x for x in nd.all() if &#39;ash&#39; in getattr(x, field)]
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
AttributeError: &#39;NetDevice&#39; object has no attribute &#39;bacon&#39;
</pre></div>
</div>
<p>Is better than this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">nd</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="k">if</span> <span class="s1">&#39;ash&#39;</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)]</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>Because then you know that &#8216;bacon&#8217; isn&#8217;t a field you can search on.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>token</strong> (<em>string</em>) &#8211; Token to search match on in &#64;field</li>
<li><strong>field</strong> (<em>string</em>) &#8211; The field to match on when searching</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of NetDevice objects</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="trigger.netdevices.NetDevices._actual.set_loader">
<code class="descname">set_loader</code><span class="sig-paren">(</span><em>loader</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.netdevices.NetDevices._actual.set_loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the NetDevices loader and initialize internal dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>loader</strong> &#8211; A <code class="xref py py-obj docutils literal"><span class="pre">BaseLoader</span></code> plugin instance</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="netscreen.html" class="btn btn-neutral float-right" title="trigger.netscreen — Juniper NetScreen firewall parser" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gorc.html" class="btn btn-neutral" title="trigger.gorc — Determine commands to run upon login" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2006-2016, AOL Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.6.rc4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>