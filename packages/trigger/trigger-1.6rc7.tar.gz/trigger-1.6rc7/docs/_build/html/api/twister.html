

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>trigger.twister — Asynchronous device interaction library &mdash; Trigger 1.6.rc4 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Trigger 1.6.rc4 documentation" href="../index.html"/>
        <link rel="up" title="API Documentation" href="index.html"/>
        <link rel="next" title="trigger.utils — CLI tools and utilities library" href="utils.html"/>
        <link rel="prev" title="trigger.tacacsrc — Network credentials library" href="tacacsrc.html"/>
 
<style type="text/css">
    span.changelog-support {color: #4070A0;}
    span.changelog-bug {color: #A04040;}
    span.changelog-feature {color: #40A056;}
    a.changelog-release {font-weight: bold;}
</style>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Trigger
          

          
          </a>

          
            
            
              <div class="version">
                1.6.rc4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platforms.html">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Usage Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="acl.html"><code class="docutils literal"><span class="pre">trigger.acl</span></code> &#8212; ACL parsing library</a></li>
<li class="toctree-l2"><a class="reference internal" href="changemgmt.html"><code class="docutils literal"><span class="pre">trigger.changemgmt</span></code> &#8212; Change management library</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmds.html"><code class="docutils literal"><span class="pre">trigger.cmds</span></code> &#8212; Command execution library</a></li>
<li class="toctree-l2"><a class="reference internal" href="conf.html"><code class="docutils literal"><span class="pre">trigger.conf</span></code> &#8212; Configuration &amp; Settings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="contrib.html"><code class="docutils literal"><span class="pre">trigger.contrib</span></code> &#8212; Extra, optional tools that solve common problems, extend, or modify core functionality.</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html"><code class="docutils literal"><span class="pre">trigger.exceptions</span></code> &#8212; Trigger&#8217;s Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="gorc.html"><code class="docutils literal"><span class="pre">trigger.gorc</span></code> &#8212; Determine commands to run upon login</a></li>
<li class="toctree-l2"><a class="reference internal" href="netdevices.html"><code class="docutils literal"><span class="pre">trigger.netdevices</span></code> &#8212; Network device metadata library</a></li>
<li class="toctree-l2"><a class="reference internal" href="netscreen.html"><code class="docutils literal"><span class="pre">trigger.netscreen</span></code> &#8212; Juniper NetScreen firewall parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="rancid.html"><code class="docutils literal"><span class="pre">trigger.rancid</span></code> &#8212; RANCID Compatibility Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="tacacsrc.html"><code class="docutils literal"><span class="pre">trigger.tacacsrc</span></code> &#8212; Network credentials library</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal"><span class="pre">trigger.twister</span></code> &#8212; Asynchronous device interaction library</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html"><code class="docutils literal"><span class="pre">trigger.utils</span></code> &#8212; CLI tools and utilities library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Getting Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experimental.html">Experimental</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Trigger</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">API Documentation</a> &raquo;</li>
      
    <li><code class="docutils literal"><span class="pre">trigger.twister</span></code> &#8212; Asynchronous device interaction library</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/twister.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-trigger.twister">
<span id="trigger-twister-asynchronous-device-interaction-library"></span><h1><a class="reference internal" href="#module-trigger.twister" title="trigger.twister"><code class="xref py py-mod docutils literal"><span class="pre">trigger.twister</span></code></a> &#8212; Asynchronous device interaction library<a class="headerlink" href="#module-trigger.twister" title="Permalink to this headline">¶</a></h1>
<p>Login and basic command-line interaction support using the Twisted asynchronous
I/O framework. The Trigger Twister is just like the Mersenne Twister, except
not at all.</p>
<dl class="class">
<dt id="trigger.twister.IncrementalXMLTreeBuilder">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">IncrementalXMLTreeBuilder</code><span class="sig-paren">(</span><em>callback</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.IncrementalXMLTreeBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of XMLTreeBuilder that runs a callback on each tag.</p>
<p>We need this because JunoScript treats the entire session as one XML
document. IETF NETCONF fixes that.</p>
</dd></dl>

<dl class="class">
<dt id="trigger.twister.Interactor">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">Interactor</code><span class="sig-paren">(</span><em>log_to=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.Interactor" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an interactive shell.</p>
<p>Intended for use as an action with pty_connect(). See gong for an example.</p>
<dl class="method">
<dt id="trigger.twister.Interactor.connectionMade">
<code class="descname">connectionMade</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.Interactor.connectionMade" title="Permalink to this definition">¶</a></dt>
<dd><p>Fire up stdin/stdout once we connect.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.Interactor.dataReceived">
<code class="descname">dataReceived</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.Interactor.dataReceived" title="Permalink to this definition">¶</a></dt>
<dd><p>And write data to the terminal.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.Interactor.loseConnection">
<code class="descname">loseConnection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.Interactor.loseConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate the connection. Link this to the transport method of the same
name.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.IoslikeSendExpect">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">IoslikeSendExpect</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=None</em>, <em>command_interval=0</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.IoslikeSendExpect" title="Permalink to this definition">¶</a></dt>
<dd><p>Action for use with TriggerTelnet as a state machine.</p>
<p>Take a list of commands, and send them to the device until we run out or
one errors. Wait for a prompt after each.</p>
<dl class="method">
<dt id="trigger.twister.IoslikeSendExpect.connectionMade">
<code class="descname">connectionMade</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.IoslikeSendExpect.connectionMade" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when we connect.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.IoslikeSendExpect.dataReceived">
<code class="descname">dataReceived</code><span class="sig-paren">(</span><em>bytes</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.IoslikeSendExpect.dataReceived" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when we get data.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.IoslikeSendExpect.timeoutConnection">
<code class="descname">timeoutConnection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.IoslikeSendExpect.timeoutConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when we timeout.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerClientFactory">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerClientFactory</code><span class="sig-paren">(</span><em>deferred</em>, <em>creds=None</em>, <em>init_commands=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerClientFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory for all clients. Subclass me.</p>
<dl class="method">
<dt id="trigger.twister.TriggerClientFactory.clientConnectionFailed">
<code class="descname">clientConnectionFailed</code><span class="sig-paren">(</span><em>connector</em>, <em>reason</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerClientFactory.clientConnectionFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when the connection fails.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerClientFactory.clientConnectionLost">
<code class="descname">clientConnectionLost</code><span class="sig-paren">(</span><em>connector</em>, <em>reason</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerClientFactory.clientConnectionLost" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when the connection is lost.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHAsyncPtyChannel">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHAsyncPtyChannel</code><span class="sig-paren">(</span><em>localWindow=0</em>, <em>localMaxPacket=0</em>, <em>remoteWindow=0</em>, <em>remoteMaxPacket=0</em>, <em>conn=None</em>, <em>data=None</em>, <em>avatar=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHAsyncPtyChannel" title="Permalink to this definition">¶</a></dt>
<dd><p>An SSH channel that requests a non-interactive pty intended for async
usage.</p>
<p>Some devices won&#8217;t allow a shell without a pty, so we have to do a
&#8216;pty-req&#8217;.</p>
<p>This is distinctly different from ~trigger.twister.TriggerSSHPtyChannel`
which is intended for interactive end-user sessions.</p>
</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHChannelBase">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHChannelBase</code><span class="sig-paren">(</span><em>localWindow=0</em>, <em>localMaxPacket=0</em>, <em>remoteWindow=0</em>, <em>remoteMaxPacket=0</em>, <em>conn=None</em>, <em>data=None</em>, <em>avatar=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHChannelBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for SSH channels.</p>
<p>The method self._setup_channelOpen() should be called by channelOpen() in
the subclasses. Before you subclass, however, see if you can&#8217;t just use
TriggerSSHGenericChannel as-is!</p>
<dl class="method">
<dt id="trigger.twister.TriggerSSHChannelBase.channelOpen">
<code class="descname">channelOpen</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHChannelBase.channelOpen" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when the channel opens.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHChannelBase.dataReceived">
<code class="descname">dataReceived</code><span class="sig-paren">(</span><em>bytes</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHChannelBase.dataReceived" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when we receive data.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHChannelBase.loseConnection">
<code class="descname">loseConnection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHChannelBase.loseConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate the connection. Link this to the transport method of the same
name.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHChannelBase.timeoutConnection">
<code class="descname">timeoutConnection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHChannelBase.timeoutConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when the connection times out.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHChannelFactory">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHChannelFactory</code><span class="sig-paren">(</span><em>deferred</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=None</em>, <em>channel_class=None</em>, <em>command_interval=0</em>, <em>prompt_pattern=None</em>, <em>device=None</em>, <em>connection_class=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHChannelFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Intended to be used as a parent of automated SSH channels (e.g. Junoscript,
NetScreen, NetScaler) to eliminate boiler plate in those subclasses.</p>
</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHCommandChannel">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHCommandChannel</code><span class="sig-paren">(</span><em>command</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHCommandChannel" title="Permalink to this definition">¶</a></dt>
<dd><p>Run SSH commands on a system using &#8216;exec&#8217;</p>
<p>This will multiplex channels over a single connection. Because of the
nature of the multiplexing setup, the master list of commands is stored on
the SSH connection, and the state of each command is stored within each
individual channel which feeds its result back to the factory.</p>
<dl class="method">
<dt id="trigger.twister.TriggerSSHCommandChannel.channelOpen">
<code class="descname">channelOpen</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHCommandChannel.channelOpen" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when the channel opens.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHCommandChannel.loseConnection">
<code class="descname">loseConnection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHCommandChannel.loseConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Default loseConnection</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHCommandChannel.send_next_command">
<code class="descname">send_next_command</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHCommandChannel.send_next_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Send the next command in the stack stored on the connection</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHConnection">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHConnection</code><span class="sig-paren">(</span><em>commands=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to manage, you know, an SSH connection.</p>
<p>Optionally takes a list of commands that may be passed on.</p>
<dl class="method">
<dt id="trigger.twister.TriggerSSHConnection.channelClosed">
<code class="descname">channelClosed</code><span class="sig-paren">(</span><em>channel</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHConnection.channelClosed" title="Permalink to this definition">¶</a></dt>
<dd><p>Forcefully close the transport connection when a channel closes
connection. This is assuming only one channel is open.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHConnection.serviceStarted">
<code class="descname">serviceStarted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHConnection.serviceStarted" title="Permalink to this definition">¶</a></dt>
<dd><p>Open the channel once we start.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHGenericChannel">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHGenericChannel</code><span class="sig-paren">(</span><em>localWindow=0</em>, <em>localMaxPacket=0</em>, <em>remoteWindow=0</em>, <em>remoteMaxPacket=0</em>, <em>conn=None</em>, <em>data=None</em>, <em>avatar=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHGenericChannel" title="Permalink to this definition">¶</a></dt>
<dd><p>An SSH channel using all of the Trigger defaults to interact with network
devices that implement SSH without any tricks.</p>
<p>Currently A10, Cisco, Brocade, NetScreen can simply use this. Nice!</p>
<p>Before you create your own subclass, see if you can&#8217;t use me as-is!</p>
</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHJunoscriptChannel">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHJunoscriptChannel</code><span class="sig-paren">(</span><em>localWindow=0</em>, <em>localMaxPacket=0</em>, <em>remoteWindow=0</em>, <em>remoteMaxPacket=0</em>, <em>conn=None</em>, <em>data=None</em>, <em>avatar=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHJunoscriptChannel" title="Permalink to this definition">¶</a></dt>
<dd><p>An SSH channel to execute Junoscript commands on a Juniper device running
Junos.</p>
<p>This completely assumes that we are the only channel in the factory (a
TriggerJunoscriptFactory) and walks all the way back up to the factory for
its arguments.</p>
<dl class="method">
<dt id="trigger.twister.TriggerSSHJunoscriptChannel.channelOpen">
<code class="descname">channelOpen</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHJunoscriptChannel.channelOpen" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when channel opens.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHJunoscriptChannel.dataReceived">
<code class="descname">dataReceived</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHJunoscriptChannel.dataReceived" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when we receive data.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHMultiplexConnection">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHMultiplexConnection</code><span class="sig-paren">(</span><em>commands=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHMultiplexConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for multiplexing SSH &#8216;exec&#8217; channels on a single connection.</p>
<p>Opens a new channel for each command in the stack once the previous channel
has closed. In this pattern the Connection and the Channel are intertwined.</p>
<dl class="method">
<dt id="trigger.twister.TriggerSSHMultiplexConnection.channelClosed">
<code class="descname">channelClosed</code><span class="sig-paren">(</span><em>channel</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHMultiplexConnection.channelClosed" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the channel when we&#8217;re done. But not the transport connection</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHMultiplexConnection.send_command">
<code class="descname">send_command</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHMultiplexConnection.send_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Send the next command in the stack once the previous channel has closed</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHNetscalerChannel">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHNetscalerChannel</code><span class="sig-paren">(</span><em>localWindow=0</em>, <em>localMaxPacket=0</em>, <em>remoteWindow=0</em>, <em>remoteMaxPacket=0</em>, <em>conn=None</em>, <em>data=None</em>, <em>avatar=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHNetscalerChannel" title="Permalink to this definition">¶</a></dt>
<dd><p>An SSH channel to interact with Citrix NetScaler hardware.</p>
<p>It&#8217;s almost a generic SSH channel except that we must check for errors
first, because a prompt is not returned when an error is received. This had
to be accounted for in the <code class="docutils literal"><span class="pre">dataReceived()</span></code> method.</p>
<dl class="method">
<dt id="trigger.twister.TriggerSSHNetscalerChannel.dataReceived">
<code class="descname">dataReceived</code><span class="sig-paren">(</span><em>bytes</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHNetscalerChannel.dataReceived" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when we receive data.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHPtyChannel">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHPtyChannel</code><span class="sig-paren">(</span><em>localWindow=0</em>, <em>localMaxPacket=0</em>, <em>remoteWindow=0</em>, <em>remoteMaxPacket=0</em>, <em>conn=None</em>, <em>data=None</em>, <em>avatar=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHPtyChannel" title="Permalink to this definition">¶</a></dt>
<dd><p>Used by pty_connect() to turn up an interactive SSH pty channel.</p>
<dl class="method">
<dt id="trigger.twister.TriggerSSHPtyChannel.channelOpen">
<code class="descname">channelOpen</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHPtyChannel.channelOpen" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup the terminal when the channel opens.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHPtyClientFactory">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHPtyClientFactory</code><span class="sig-paren">(</span><em>deferred</em>, <em>action</em>, <em>creds=None</em>, <em>display_banner=None</em>, <em>init_commands=None</em>, <em>device=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHPtyClientFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory for an interactive SSH connection.</p>
<p>&#8216;action&#8217; is a Protocol that will be connected to the session after login.
Use it to interact with the user and pass along commands.</p>
</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHTransport">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHTransport</code><a class="headerlink" href="#trigger.twister.TriggerSSHTransport" title="Permalink to this definition">¶</a></dt>
<dd><p>SSH transport with Trigger&#8217;s defaults.</p>
<p>Call with magic factory attributes <code class="docutils literal"><span class="pre">creds</span></code>, a tuple of login
credentials, and <code class="docutils literal"><span class="pre">connection_class</span></code>, the class of channel to open, and
<code class="docutils literal"><span class="pre">commands</span></code>, the list of commands to pass to the connection.</p>
<dl class="method">
<dt id="trigger.twister.TriggerSSHTransport.connectionLost">
<code class="descname">connectionLost</code><span class="sig-paren">(</span><em>reason</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHTransport.connectionLost" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect when the transport connection is lost, such as when the
remote end closes the connection prematurely (hosts.allow, etc.)</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHTransport.connectionMade">
<code class="descname">connectionMade</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHTransport.connectionMade" title="Permalink to this definition">¶</a></dt>
<dd><p>Once the connection is up, set the ciphers but don&#8217;t do anything else!</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHTransport.connectionSecure">
<code class="descname">connectionSecure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHTransport.connectionSecure" title="Permalink to this definition">¶</a></dt>
<dd><p>Once we&#8217;re secure, authenticate.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHTransport.dataReceived">
<code class="descname">dataReceived</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHTransport.dataReceived" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert data into packets</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHTransport.receiveError">
<code class="descname">receiveError</code><span class="sig-paren">(</span><em>reason</em>, <em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHTransport.receiveError" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when we receive an error.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHTransport.sendDisconnect">
<code class="descname">sendDisconnect</code><span class="sig-paren">(</span><em>reason</em>, <em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHTransport.sendDisconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Trigger disconnect of the transport.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHTransport.verifyHostKey">
<code class="descname">verifyHostKey</code><span class="sig-paren">(</span><em>pubKey</em>, <em>fingerprint</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHTransport.verifyHostKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify host key, but don&#8217;t actually verify. Awesome.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerSSHUserAuth">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerSSHUserAuth</code><span class="sig-paren">(</span><em>user</em>, <em>options</em>, <em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHUserAuth" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform user authentication over SSH.</p>
<dl class="method">
<dt id="trigger.twister.TriggerSSHUserAuth.getGenericAnswers">
<code class="descname">getGenericAnswers</code><span class="sig-paren">(</span><em>name</em>, <em>information</em>, <em>prompts</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHUserAuth.getGenericAnswers" title="Permalink to this definition">¶</a></dt>
<dd><p>Send along the password when authentication mechanism is not &#8216;password&#8217;
This is most commonly the case with &#8216;keyboard-interactive&#8217;, which even
when configured within self.preferredOrder, does not work using default
getPassword() method.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHUserAuth.getPassword">
<code class="descname">getPassword</code><span class="sig-paren">(</span><em>prompt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHUserAuth.getPassword" title="Permalink to this definition">¶</a></dt>
<dd><p>Send along the password.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHUserAuth.ssh_USERAUTH_BANNER">
<code class="descname">ssh_USERAUTH_BANNER</code><span class="sig-paren">(</span><em>packet</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHUserAuth.ssh_USERAUTH_BANNER" title="Permalink to this definition">¶</a></dt>
<dd><p>Display SSH banner.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerSSHUserAuth.ssh_USERAUTH_FAILURE">
<code class="descname">ssh_USERAUTH_FAILURE</code><span class="sig-paren">(</span><em>packet</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerSSHUserAuth.ssh_USERAUTH_FAILURE" title="Permalink to this definition">¶</a></dt>
<dd><p>An almost exact duplicate of SSHUserAuthClient.ssh_USERAUTH_FAILURE
modified to forcefully disconnect. If we receive authentication
failures, instead of looping until the server boots us and performing a
sendDisconnect(), we raise a <a class="reference internal" href="exceptions.html#trigger.exceptions.LoginFailure" title="trigger.exceptions.LoginFailure"><code class="xref py py-obj docutils literal"><span class="pre">LoginFailure</span></code></a> and
call loseConnection().</p>
<p>See the base docstring for the method signature.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerTelnet">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerTelnet</code><span class="sig-paren">(</span><em>timeout=60</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet" title="Permalink to this definition">¶</a></dt>
<dd><p>Telnet-based session login state machine. Primarily used by IOS-like type
devices.</p>
<dl class="method">
<dt id="trigger.twister.TriggerTelnet.enableRemote">
<code class="descname">enableRemote</code><span class="sig-paren">(</span><em>option</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet.enableRemote" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow telnet clients to enable options if for some reason they aren&#8217;t
enabled already (e.g. ECHO). (Ref: <a class="reference external" href="http://bit.ly/wkFZFg">http://bit.ly/wkFZFg</a>) For some
reason Arista Networks hardware is the only vendor that needs this
method right now.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerTelnet.login_state_machine">
<code class="descname">login_state_machine</code><span class="sig-paren">(</span><em>bytes</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet.login_state_machine" title="Permalink to this definition">¶</a></dt>
<dd><p>Track user login state.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerTelnet.state_enable">
<code class="descname">state_enable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet.state_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Special Foundry breakage because they don&#8217;t do auto-enable from
TACACS by default. Use &#8216;aaa authentication login privilege-mode&#8217;.
Also, why no space after the Password: prompt here?</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerTelnet.state_enable_pw">
<code class="descname">state_enable_pw</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet.state_enable_pw" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass the enable password from the factory or NetDevices</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerTelnet.state_logged_in">
<code class="descname">state_logged_in</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet.state_logged_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Once we&#8217;re logged in, exit state machine and pass control to the
action.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerTelnet.state_login_pw">
<code class="descname">state_login_pw</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet.state_login_pw" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass the login password from the factory or NetDevices</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerTelnet.state_password">
<code class="descname">state_password</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet.state_password" title="Permalink to this definition">¶</a></dt>
<dd><p>After we got password prompt, check for enabled prompt.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerTelnet.state_percent_error">
<code class="descname">state_percent_error</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet.state_percent_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Found a % error message. Don&#8217;t return immediately because we
don&#8217;t have the error text yet.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerTelnet.state_raise_error">
<code class="descname">state_raise_error</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet.state_raise_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when we get a login failure.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerTelnet.state_username">
<code class="descname">state_username</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet.state_username" title="Permalink to this definition">¶</a></dt>
<dd><p>After we&#8217;ve gotten username, check for password prompt.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.twister.TriggerTelnet.timeoutConnection">
<code class="descname">timeoutConnection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnet.timeoutConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Do this when we timeout logging in.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.twister.TriggerTelnetClientFactory">
<em class="property">class </em><code class="descclassname">trigger.twister.</code><code class="descname">TriggerTelnetClientFactory</code><span class="sig-paren">(</span><em>deferred</em>, <em>action</em>, <em>creds=None</em>, <em>loginpw=None</em>, <em>enablepw=None</em>, <em>init_commands=None</em>, <em>device=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.TriggerTelnetClientFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory for a telnet connection.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.connect">
<code class="descclassname">trigger.twister.</code><code class="descname">connect</code><span class="sig-paren">(</span><em>device</em>, <em>init_commands=None</em>, <em>output_logger=None</em>, <em>login_errback=None</em>, <em>reconnect_handler=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to a network device via pty for an interactive shell.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>device</strong> &#8211; A <a class="reference internal" href="netdevices.html#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><code class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></code></a> object.</li>
<li><strong>init_commands</strong> &#8211; (Optional) A list of commands to execute upon logging into the device.
If not set, they will be attempted to be read from <code class="docutils literal"><span class="pre">.gorc</span></code>.</li>
<li><strong>output_logger</strong> &#8211; (Optional) If set all data received by the device, including user
input, will be written to this logger. This logger must behave like a
file-like object and a implement a <a class="reference internal" href="tacacsrc.html#trigger.tacacsrc.Tacacsrc.write" title="trigger.tacacsrc.Tacacsrc.write"><code class="xref py py-obj docutils literal"><span class="pre">write()</span></code></a> method. Hint: Use
<code class="docutils literal"><span class="pre">StringIO</span></code>.</li>
<li><strong>login_errback</strong> &#8211; (Optional) An callable to be used as an errback that will handle the
login failure behavior. If not set the default handler will be used.</li>
<li><strong>reconnect_handler</strong> &#8211; (Optional) A callable to handle the behavior of an authentication
failure after a login has failed. If not set default handler will be
used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.execute">
<code class="descclassname">trigger.twister.</code><code class="descname">execute</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=300</em>, <em>command_interval=0</em>, <em>force_cli=False</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to a <code class="docutils literal"><span class="pre">device</span></code> and sequentially execute all the commands in the
iterable <code class="docutils literal"><span class="pre">commands</span></code>.</p>
<p>Returns a Twisted <code class="docutils literal"><span class="pre">Deferred</span></code> object, whose callback will get a sequence
of all the results after the connection is finished.</p>
<p><code class="docutils literal"><span class="pre">commands</span></code> is usually just a list, however, you can have also make it a
generator, and have it and <code class="docutils literal"><span class="pre">incremental</span></code> share a closure to some state
variables. This allows you to determine what commands to execute
dynamically based on the results of previous commands. This implementation
is experimental and it might be a better idea to have the <code class="docutils literal"><span class="pre">incremental</span></code>
callback determine what command to execute next; it could then be a method
of an object that keeps state.</p>
<blockquote>
<div>BEWARE: Your generator cannot block; you must immediately
decide what next command to execute, if any.</div></blockquote>
<p>Any <code class="docutils literal"><span class="pre">None</span></code> in the command sequence will result in a <code class="docutils literal"><span class="pre">None</span></code> being placed
in the output sequence, with no command issued to the device.</p>
<p>If any command returns an error, the connection is dropped immediately and
the errback will fire with the failed command. You may set <code class="docutils literal"><span class="pre">with_errors</span></code>
to get the exception objects in the list instead.</p>
<p>Connection failures will still fire the errback.</p>
<p><a class="reference internal" href="exceptions.html#trigger.exceptions.LoginTimeout" title="trigger.exceptions.LoginTimeout"><code class="xref py py-obj docutils literal"><span class="pre">LoginTimeout</span></code></a> errors are always possible if the login
process takes longer than expected and cannot be disabled.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>device</strong> &#8211; A <a class="reference internal" href="netdevices.html#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><code class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></code></a> object</li>
<li><strong>commands</strong> &#8211; An iterable of commands to execute (without newlines).</li>
<li><strong>creds</strong> &#8211; (Optional) A 2-tuple of (username, password). If unset it will fetch it
from <code class="docutils literal"><span class="pre">.tacacsrc</span></code>.</li>
<li><strong>incremental</strong> &#8211; (Optional) A callback that will be called with an empty sequence upon
connection and then called every time a result comes back from the
device, with the list of all results.</li>
<li><strong>with_errors</strong> &#8211; (Optional) Return exceptions as results instead of raising them</li>
<li><strong>timeout</strong> &#8211; (Optional) Command response timeout in seconds. Set to <code class="docutils literal"><span class="pre">None</span></code> to
disable. The default is in <code class="docutils literal"><span class="pre">settings.DEFAULT_TIMEOUT</span></code>.
<a class="reference internal" href="exceptions.html#trigger.exceptions.CommandTimeout" title="trigger.exceptions.CommandTimeout"><code class="xref py py-obj docutils literal"><span class="pre">CommandTimeout</span></code></a> errors will result if a command
seems to take longer to return than specified.</li>
<li><strong>command_interval</strong> &#8211; (Optional) Amount of time in seconds to wait between sending commands.</li>
<li><strong>force_cli</strong> &#8211; (Optional) Juniper-only: Force use of CLI instead of Junoscript.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A Twisted <code class="docutils literal"><span class="pre">Deferred</span></code> object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.execute_async_pty_ssh">
<code class="descclassname">trigger.twister.</code><code class="descname">execute_async_pty_ssh</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=300</em>, <em>command_interval=0</em>, <em>prompt_pattern=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.execute_async_pty_ssh" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute via SSH for a device that requires shell + pty-req.</p>
<p>Please see <a class="reference internal" href="#trigger.twister.execute" title="trigger.twister.execute"><code class="xref py py-obj docutils literal"><span class="pre">execute</span></code></a> for a full description of the
arguments and how this works.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.execute_exec_ssh">
<code class="descclassname">trigger.twister.</code><code class="descname">execute_exec_ssh</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=300</em>, <em>command_interval=0</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.execute_exec_ssh" title="Permalink to this definition">¶</a></dt>
<dd><p>Use multiplexed SSH &#8216;exec&#8217; command channels to execute commands.</p>
<p>This will maintain a single SSH connection and run each new command in a
separate channel after the previous command completes.</p>
<p>Please see <a class="reference internal" href="#trigger.twister.execute" title="trigger.twister.execute"><code class="xref py py-obj docutils literal"><span class="pre">execute</span></code></a> for a full description of the
arguments and how this works.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.execute_generic_ssh">
<code class="descclassname">trigger.twister.</code><code class="descname">execute_generic_ssh</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=300</em>, <em>command_interval=0</em>, <em>channel_class=None</em>, <em>prompt_pattern=None</em>, <em>method='Generic'</em>, <em>connection_class=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.execute_generic_ssh" title="Permalink to this definition">¶</a></dt>
<dd><p>Use default SSH channel to execute commands on a device. Should work with
anything not wonky.</p>
<p>Please see <a class="reference internal" href="#trigger.twister.execute" title="trigger.twister.execute"><code class="xref py py-obj docutils literal"><span class="pre">execute</span></code></a> for a full description of the
arguments and how this works.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.execute_ioslike">
<code class="descclassname">trigger.twister.</code><code class="descname">execute_ioslike</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=300</em>, <em>command_interval=0</em>, <em>loginpw=None</em>, <em>enablepw=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.execute_ioslike" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute commands on a Cisco/IOS-like device. It will automatically try to
connect using SSH if it is available and not disabled in <code class="docutils literal"><span class="pre">settings.py</span></code>.
If SSH is unavailable, it will fallback to telnet unless that is also
disabled in the settings. Otherwise it will fail, so you should probably
make sure one or the other is enabled!</p>
<p>Please see <a class="reference internal" href="#trigger.twister.execute" title="trigger.twister.execute"><code class="xref py py-obj docutils literal"><span class="pre">execute</span></code></a> for a full description of the
arguments and how this works.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.execute_ioslike_ssh">
<code class="descclassname">trigger.twister.</code><code class="descname">execute_ioslike_ssh</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=300</em>, <em>command_interval=0</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.execute_ioslike_ssh" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute via SSH for IOS-like devices with some exceptions.</p>
<p>Please see <a class="reference internal" href="#trigger.twister.execute" title="trigger.twister.execute"><code class="xref py py-obj docutils literal"><span class="pre">execute</span></code></a> for a full description of the
arguments and how this works.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.execute_ioslike_telnet">
<code class="descclassname">trigger.twister.</code><code class="descname">execute_ioslike_telnet</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=300</em>, <em>command_interval=0</em>, <em>loginpw=None</em>, <em>enablepw=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.execute_ioslike_telnet" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute commands via telnet on a Cisco/IOS-like device.</p>
<p>Please see <a class="reference internal" href="#trigger.twister.execute" title="trigger.twister.execute"><code class="xref py py-obj docutils literal"><span class="pre">execute</span></code></a> for a full description of the
arguments and how this works.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.execute_junoscript">
<code class="descclassname">trigger.twister.</code><code class="descname">execute_junoscript</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=300</em>, <em>command_interval=0</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.execute_junoscript" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to a Juniper device and enable Junoscript XML mode. All commands
are expected to be XML commands (ElementTree.Element objects suitable for
wrapping in <code class="docutils literal"><span class="pre">&lt;rpc&gt;</span></code> elements). Errors are expected to be of type
<code class="docutils literal"><span class="pre">xnm:error</span></code>. Note that prompt detection is not used here.</p>
<p>Please see <a class="reference internal" href="#trigger.twister.execute" title="trigger.twister.execute"><code class="xref py py-obj docutils literal"><span class="pre">execute</span></code></a> for a full description of the
arguments and how this works.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.execute_netscaler">
<code class="descclassname">trigger.twister.</code><code class="descname">execute_netscaler</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=300</em>, <em>command_interval=0</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.execute_netscaler" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute commands on a NetScaler device.</p>
<p>Please see <a class="reference internal" href="#trigger.twister.execute" title="trigger.twister.execute"><code class="xref py py-obj docutils literal"><span class="pre">execute</span></code></a> for a full description of the
arguments and how this works.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.execute_netscreen">
<code class="descclassname">trigger.twister.</code><code class="descname">execute_netscreen</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=300</em>, <em>command_interval=0</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.execute_netscreen" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute commands on a NetScreen device running ScreenOS. For NetScreen
devices running Junos, use <a class="reference internal" href="#trigger.twister.execute_junoscript" title="trigger.twister.execute_junoscript"><code class="xref py py-obj docutils literal"><span class="pre">execute_junoscript</span></code></a>.</p>
<p>Please see <a class="reference internal" href="#trigger.twister.execute" title="trigger.twister.execute"><code class="xref py py-obj docutils literal"><span class="pre">execute</span></code></a> for a full description of the
arguments and how this works.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.execute_pica8">
<code class="descclassname">trigger.twister.</code><code class="descname">execute_pica8</code><span class="sig-paren">(</span><em>device</em>, <em>commands</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>with_errors=False</em>, <em>timeout=300</em>, <em>command_interval=0</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.execute_pica8" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute commands on a Pica8 device.  This is only needed to append
&#8216;| no-more&#8217; to show commands because Pica8 currently (v2.2) lacks
a global command to disable paging.</p>
<p>Please see <a class="reference internal" href="#trigger.twister.execute" title="trigger.twister.execute"><code class="xref py py-obj docutils literal"><span class="pre">execute</span></code></a> for a full description of the
arguments and how this works.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.handle_login_failure">
<code class="descclassname">trigger.twister.</code><code class="descname">handle_login_failure</code><span class="sig-paren">(</span><em>failure</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.handle_login_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>An errback to try detect a login failure</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>failure</strong> &#8211; A Twisted <code class="docutils literal"><span class="pre">Failure</span></code> instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.has_ioslike_error">
<code class="descclassname">trigger.twister.</code><code class="descname">has_ioslike_error</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.has_ioslike_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether a string seems to contain an IOS-like error.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.has_juniper_error">
<code class="descclassname">trigger.twister.</code><code class="descname">has_juniper_error</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.has_juniper_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether a string seems to contain an Juniper error.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.has_junoscript_error">
<code class="descclassname">trigger.twister.</code><code class="descname">has_junoscript_error</code><span class="sig-paren">(</span><em>tag</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.has_junoscript_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether an Element contains a Junoscript xnm:error.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.has_netscaler_error">
<code class="descclassname">trigger.twister.</code><code class="descname">has_netscaler_error</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.has_netscaler_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether a string seems to contain a NetScaler error.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.is_awaiting_confirmation">
<code class="descclassname">trigger.twister.</code><code class="descname">is_awaiting_confirmation</code><span class="sig-paren">(</span><em>prompt</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.is_awaiting_confirmation" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a prompt is asking for us for confirmation and returns a Boolean.</p>
<p>New patterns may be added by customizing <code class="docutils literal"><span class="pre">settings.CONTINUE_PROMPTS</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.twister</span> <span class="k">import</span> <span class="n">is_awaiting_confirmation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_awaiting_confirmation</span><span class="p">(</span><span class="s1">&#39;Destination filename [running-config]? &#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prompt</strong> &#8211; The prompt string to check</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.pty_connect">
<code class="descclassname">trigger.twister.</code><code class="descname">pty_connect</code><span class="sig-paren">(</span><em>device</em>, <em>action</em>, <em>creds=None</em>, <em>display_banner=None</em>, <em>ping_test=False</em>, <em>init_commands=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.pty_connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to a <code class="docutils literal"><span class="pre">device</span></code> and log in. Use SSHv2 or telnet as appropriate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>device</strong> &#8211; A <a class="reference internal" href="netdevices.html#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><code class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></code></a> object.</li>
<li><strong>action</strong> &#8211; A Twisted <code class="docutils literal"><span class="pre">Protocol</span></code> instance (not class) that will be activated when
the session is ready.</li>
<li><strong>creds</strong> &#8211; A 2-tuple (username, password). By default, credentials from
<code class="docutils literal"><span class="pre">.tacacsrc</span></code> will be used according to <code class="docutils literal"><span class="pre">settings.DEFAULT_REALM</span></code>.
Override that here.</li>
<li><strong>display_banner</strong> &#8211; Will be called for SSH pre-authentication banners. It will receive two
args, <code class="docutils literal"><span class="pre">banner</span></code> and <code class="docutils literal"><span class="pre">language</span></code>. By default, nothing will be done
with the banner.</li>
<li><strong>ping_test</strong> &#8211; If set, the device is pinged and must succeed in order to proceed.</li>
<li><strong>init_commands</strong> &#8211; A list of commands to execute upon logging into the device.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A Twisted <code class="docutils literal"><span class="pre">Deferred</span></code> object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.requires_enable">
<code class="descclassname">trigger.twister.</code><code class="descname">requires_enable</code><span class="sig-paren">(</span><em>proto_obj</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.requires_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a device requires enable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>proto_obj</strong> &#8211; A Protocol object such as an SSHChannel</li>
<li><strong>data</strong> &#8211; The channel data to check for an enable prompt</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.send_enable">
<code class="descclassname">trigger.twister.</code><code class="descname">send_enable</code><span class="sig-paren">(</span><em>proto_obj</em>, <em>disconnect_on_fail=True</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.send_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Send &#8216;enable&#8217; and enable password to device.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>proto_obj</strong> &#8211; A Protocol object such as an SSHChannel</li>
<li><strong>disconnect_on_fail</strong> &#8211; If set, will forcefully disconnect on enable password failure</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trigger.twister.stop_reactor">
<code class="descclassname">trigger.twister.</code><code class="descname">stop_reactor</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.twister.stop_reactor" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the reactor if it&#8217;s already running.</p>
</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="utils.html" class="btn btn-neutral float-right" title="trigger.utils — CLI tools and utilities library" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tacacsrc.html" class="btn btn-neutral" title="trigger.tacacsrc — Network credentials library" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2006-2016, AOL Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.6.rc4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>