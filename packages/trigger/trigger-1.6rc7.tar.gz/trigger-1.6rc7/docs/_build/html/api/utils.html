

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>trigger.utils — CLI tools and utilities library &mdash; Trigger 1.6.rc4 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Trigger 1.6.rc4 documentation" href="../index.html"/>
        <link rel="up" title="API Documentation" href="index.html"/>
        <link rel="next" title="Development" href="../development.html"/>
        <link rel="prev" title="trigger.twister — Asynchronous device interaction library" href="twister.html"/>
 
<style type="text/css">
    span.changelog-support {color: #4070A0;}
    span.changelog-bug {color: #A04040;}
    span.changelog-feature {color: #40A056;}
    a.changelog-release {font-weight: bold;}
</style>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Trigger
          

          
          </a>

          
            
            
              <div class="version">
                1.6.rc4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platforms.html">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Usage Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="acl.html"><code class="docutils literal"><span class="pre">trigger.acl</span></code> &#8212; ACL parsing library</a></li>
<li class="toctree-l2"><a class="reference internal" href="changemgmt.html"><code class="docutils literal"><span class="pre">trigger.changemgmt</span></code> &#8212; Change management library</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmds.html"><code class="docutils literal"><span class="pre">trigger.cmds</span></code> &#8212; Command execution library</a></li>
<li class="toctree-l2"><a class="reference internal" href="conf.html"><code class="docutils literal"><span class="pre">trigger.conf</span></code> &#8212; Configuration &amp; Settings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="contrib.html"><code class="docutils literal"><span class="pre">trigger.contrib</span></code> &#8212; Extra, optional tools that solve common problems, extend, or modify core functionality.</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html"><code class="docutils literal"><span class="pre">trigger.exceptions</span></code> &#8212; Trigger&#8217;s Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="gorc.html"><code class="docutils literal"><span class="pre">trigger.gorc</span></code> &#8212; Determine commands to run upon login</a></li>
<li class="toctree-l2"><a class="reference internal" href="netdevices.html"><code class="docutils literal"><span class="pre">trigger.netdevices</span></code> &#8212; Network device metadata library</a></li>
<li class="toctree-l2"><a class="reference internal" href="netscreen.html"><code class="docutils literal"><span class="pre">trigger.netscreen</span></code> &#8212; Juniper NetScreen firewall parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="rancid.html"><code class="docutils literal"><span class="pre">trigger.rancid</span></code> &#8212; RANCID Compatibility Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="tacacsrc.html"><code class="docutils literal"><span class="pre">trigger.tacacsrc</span></code> &#8212; Network credentials library</a></li>
<li class="toctree-l2"><a class="reference internal" href="twister.html"><code class="docutils literal"><span class="pre">trigger.twister</span></code> &#8212; Asynchronous device interaction library</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal"><span class="pre">trigger.utils</span></code> &#8212; CLI tools and utilities library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-trigger.utils.cli"><code class="docutils literal"><span class="pre">trigger.utils.cli</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-trigger.utils.importlib"><code class="docutils literal"><span class="pre">trigger.utils.importlib</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-trigger.utils.network"><code class="docutils literal"><span class="pre">trigger.utils.network</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#trigger-utils-notifications"><code class="docutils literal"><span class="pre">trigger.utils.notifications</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-trigger.utils.notifications.handlers"><code class="docutils literal"><span class="pre">trigger.utils.notifications.handlers</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-trigger.utils.notifications.events"><code class="docutils literal"><span class="pre">trigger.utils.notifications.events</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-trigger.utils.rcs"><code class="docutils literal"><span class="pre">trigger.utils.rcs</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Getting Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experimental.html">Experimental</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Trigger</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">API Documentation</a> &raquo;</li>
      
    <li><code class="docutils literal"><span class="pre">trigger.utils</span></code> &#8212; CLI tools and utilities library</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/utils.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-trigger.utils">
<span id="trigger-utils-cli-tools-and-utilities-library"></span><h1><a class="reference internal" href="#module-trigger.utils" title="trigger.utils"><code class="xref py py-mod docutils literal"><span class="pre">trigger.utils</span></code></a> &#8212; CLI tools and utilities library<a class="headerlink" href="#module-trigger.utils" title="Permalink to this headline">¶</a></h1>
<p>A collection of CLI tools and utilities used by Trigger.</p>
<dl class="class">
<dt id="trigger.utils.JuniperElement">
<em class="property">class </em><code class="descclassname">trigger.utils.</code><code class="descname">JuniperElement</code><span class="sig-paren">(</span><em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.JuniperElement" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="trigger.utils.JuniperElement.key">
<code class="descname">key</code><a class="headerlink" href="#trigger.utils.JuniperElement.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="trigger.utils.JuniperElement.value">
<code class="descname">value</code><a class="headerlink" href="#trigger.utils.JuniperElement.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="attribute">
<dt id="trigger.utils.NodePort">
<code class="descclassname">trigger.utils.</code><code class="descname">NodePort</code><a class="headerlink" href="#trigger.utils.NodePort" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">HostPort</span></code></p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.crypt_md5">
<code class="descclassname">trigger.utils.</code><code class="descname">crypt_md5</code><span class="sig-paren">(</span><em>passwd</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.crypt_md5" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an md5-crypt hash of a clear-text password.</p>
<p>To get md5-crypt from <code class="docutils literal"><span class="pre">crypt(3)</span></code> you must pass an 8-char string starting with
&#8216;$1$&#8217; and ending with &#8216;$&#8217;, resulting in a 12-char salt. This only works on
systems where md5-crypt is default and is currently assumed to be Linux.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>passwd</strong> &#8211; Password string to be encrypted</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.parse_node_port">
<code class="descclassname">trigger.utils.</code><code class="descname">parse_node_port</code><span class="sig-paren">(</span><em>nodeport</em>, <em>delimiter=':'</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.parse_node_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a string in format &#8216;hostname&#8217; or &#8216;hostname:port&#8217;  and return them
as a 2-tuple.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.strip_juniper_namespace">
<code class="descclassname">trigger.utils.</code><code class="descname">strip_juniper_namespace</code><span class="sig-paren">(</span><em>path</em>, <em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.strip_juniper_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a Juniper XML element, strip the namespace and return a 2-tuple.</p>
<p>This is designed to be used as a <code class="docutils literal"><span class="pre">postprocessor</span></code> with
<code class="xref py py-obj docutils literal"><span class="pre">parse()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> &#8211; The attribute name of the element.</li>
<li><strong>value</strong> &#8211; The value of the element.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="module-trigger.utils.cli">
<span id="trigger-utils-cli"></span><h2><a class="reference internal" href="#module-trigger.utils.cli" title="trigger.utils.cli"><code class="xref py py-mod docutils literal"><span class="pre">trigger.utils.cli</span></code></a><a class="headerlink" href="#module-trigger.utils.cli" title="Permalink to this headline">¶</a></h2>
<p>Command-line interface utilities for Trigger tools. Intended for re-usable
pieces of code like user prompts, that don&#8217;t fit in other utils modules.</p>
<dl class="function">
<dt id="trigger.utils.cli.yesno">
<code class="descclassname">trigger.utils.cli.</code><code class="descname">yesno</code><span class="sig-paren">(</span><em>prompt</em>, <em>default=False</em>, <em>autoyes=False</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.cli.yesno" title="Permalink to this definition">¶</a></dt>
<dd><p>Present a yes-or-no prompt, get input, and return a boolean.</p>
<p>The <code class="docutils literal"><span class="pre">default</span></code> argument is ignored if <code class="docutils literal"><span class="pre">autoyes</span></code> is set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>prompt</strong> &#8211; Prompt text</li>
<li><strong>default</strong> &#8211; Yes if True; No if False</li>
<li><strong>autoyes</strong> &#8211; Automatically return True</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Default behavior (hitting &#8220;enter&#8221; returns <code class="docutils literal"><span class="pre">False</span></code>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">yesno</span><span class="p">(</span><span class="s1">&#39;Blow up the moon?&#39;</span><span class="p">)</span>
<span class="go">Blow up the moon? (y/N)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Reversed behavior (hitting &#8220;enter&#8221; returns <code class="docutils literal"><span class="pre">True</span></code>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">yesno</span><span class="p">(</span><span class="s1">&#39;Blow up the moon?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Blow up the moon? (Y/n)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Automatically return <code class="docutils literal"><span class="pre">True</span></code> with <code class="docutils literal"><span class="pre">autoyes</span></code>; no prompt is displayed:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">yesno</span><span class="p">(</span><span class="s1">&#39;Blow up the moon?&#39;</span><span class="p">,</span> <span class="n">autoyes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.get_terminal_width">
<code class="descclassname">trigger.utils.cli.</code><code class="descname">get_terminal_width</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.cli.get_terminal_width" title="Permalink to this definition">¶</a></dt>
<dd><p>Find and return stdout&#8217;s terminal width, if applicable.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.get_terminal_size">
<code class="descclassname">trigger.utils.cli.</code><code class="descname">get_terminal_size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.cli.get_terminal_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Find and return stdouts terminal size as (height, width)</p>
</dd></dl>

<dl class="class">
<dt id="trigger.utils.cli.Whirlygig">
<em class="property">class </em><code class="descclassname">trigger.utils.cli.</code><code class="descname">Whirlygig</code><span class="sig-paren">(</span><em>start_msg=''</em>, <em>done_msg=''</em>, <em>max=100</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.cli.Whirlygig" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a whirlygig for use in displaying pending operation in a command-line tool.
Guaranteed to make the user feel warm and fuzzy and be 1000% bug-free.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start_msg</strong> &#8211; The status message displayed to the user (e.g. &#8220;Doing stuff:&#8221;)</li>
<li><strong>done_msg</strong> &#8211; The completion message displayed upon completion (e.g. &#8220;Done.&#8221;)</li>
<li><strong>max</strong> &#8211; Integer of the number of whirlygig repetitions to perform</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Whirlygig</span><span class="p">(</span><span class="s2">&quot;Doing stuff:&quot;</span><span class="p">,</span> <span class="s2">&quot;Done.&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="trigger.utils.cli.Whirlygig.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.cli.Whirlygig.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the whirlygig!</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.utils.cli.NullDevice">
<em class="property">class </em><code class="descclassname">trigger.utils.cli.</code><code class="descname">NullDevice</code><a class="headerlink" href="#trigger.utils.cli.NullDevice" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to supress output to <code class="docutils literal"><span class="pre">sys.stdout</span></code> (aka <code class="docutils literal"><span class="pre">print</span></code>).</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.utils.cli</span> <span class="k">import</span> <span class="n">NullDevice</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="s2">&quot;1 - this will print to STDOUT&quot;</span>
<span class="go">1 - this will print to STDOUT</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">original_stdout</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>  <span class="c1"># keep a reference to STDOUT</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">NullDevice</span><span class="p">()</span>     <span class="c1"># redirect the real STDOUT</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="s2">&quot;2 - this won&#39;t print&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">original_stdout</span>  <span class="c1"># turn STDOUT back on</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="s2">&quot;3 - this will print to SDTDOUT&quot;</span>
<span class="go">3 - this will print to SDTDOUT</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.print_severed_head">
<code class="descclassname">trigger.utils.cli.</code><code class="descname">print_severed_head</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.cli.print_severed_head" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a demon holding a severed head. Best used when things go wrong, like
production-impacting network outages caused by fat-fingered ACL changes.</p>
<p>Thanks to Jeff Sullivan for this best error message ever.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.min_sec">
<code class="descclassname">trigger.utils.cli.</code><code class="descname">min_sec</code><span class="sig-paren">(</span><em>secs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.cli.min_sec" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an epoch timestamp and returns string of minutes:seconds.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>secs</strong> &#8211; Timestamp (in seconds)</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>  <span class="c1"># Wait a few seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finish</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">min_sec</span><span class="p">(</span><span class="n">finish</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
<span class="go">&#39;0:11&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.pretty_time">
<code class="descclassname">trigger.utils.cli.</code><code class="descname">pretty_time</code><span class="sig-paren">(</span><em>t</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.cli.pretty_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a pretty version of timestamp, including timezone info. Expects
the incoming datetime object to have proper tzinfo.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>t</strong> &#8211; A <code class="docutils literal"><span class="pre">datetime.datetime</span></code> object</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pytz</span> <span class="k">import</span> <span class="n">timezone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">localzone</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>
<span class="go">&lt;DstTzInfo &#39;US/Eastern&#39; EST-1 day, 19:00:00 STD&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">localzone</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">t</span>
<span class="go">2011-07-19 12:40:30.820920-04:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">pretty_time</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">09:40 PDT</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">localzone</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span><span class="mi">07</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">04</span><span class="p">,</span><span class="mi">13</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">t</span>
<span class="go">2011-07-20 04:13:00-05:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">pretty_time</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">tomorrow 02:13 PDT</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.proceed">
<code class="descclassname">trigger.utils.cli.</code><code class="descname">proceed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.cli.proceed" title="Permalink to this definition">¶</a></dt>
<dd><p>Present a proceed prompt. Return <code class="docutils literal"><span class="pre">True</span></code> if Y, else <code class="docutils literal"><span class="pre">False</span></code></p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.get_user">
<code class="descclassname">trigger.utils.cli.</code><code class="descname">get_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.cli.get_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the current user.</p>
</dd></dl>

</div>
<div class="section" id="module-trigger.utils.importlib">
<span id="trigger-utils-importlib"></span><h2><a class="reference internal" href="#module-trigger.utils.importlib" title="trigger.utils.importlib"><code class="xref py py-mod docutils literal"><span class="pre">trigger.utils.importlib</span></code></a><a class="headerlink" href="#module-trigger.utils.importlib" title="Permalink to this headline">¶</a></h2>
<p>Utils to import modules.</p>
<p>Taken verbatim from <code class="docutils literal"><span class="pre">django.utils.importlib</span></code> in Django 1.4.</p>
<dl class="function">
<dt id="trigger.utils.importlib.import_module">
<code class="descclassname">trigger.utils.importlib.</code><code class="descname">import_module</code><span class="sig-paren">(</span><em>name</em>, <em>package=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.importlib.import_module" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a module and return the module object.</p>
<p>The <code class="docutils literal"><span class="pre">package</span></code> argument is required when performing a relative import. It
specifies the package to use as the anchor point from which to resolve the
relative import to an absolute import.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.importlib.import_module_from_path">
<code class="descclassname">trigger.utils.importlib.</code><code class="descname">import_module_from_path</code><span class="sig-paren">(</span><em>full_path</em>, <em>global_name</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.importlib.import_module_from_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a module from a file path and return the module object.</p>
<p>Allows one to import from anywhere, something <code class="docutils literal"><span class="pre">__import__()</span></code> does not do.
The module is added to <code class="docutils literal"><span class="pre">sys.modules</span></code> as <code class="docutils literal"><span class="pre">global_name</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>full_path</strong> &#8211; The absolute path to the module .py file</li>
<li><strong>global_name</strong> &#8211; The name assigned to the module in sys.modules. To avoid
confusion, the global_name should be the same as the variable to which
you&#8217;re assigning the returned module.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-trigger.utils.network">
<span id="trigger-utils-network"></span><h2><a class="reference internal" href="#module-trigger.utils.network" title="trigger.utils.network"><code class="xref py py-mod docutils literal"><span class="pre">trigger.utils.network</span></code></a><a class="headerlink" href="#module-trigger.utils.network" title="Permalink to this headline">¶</a></h2>
<p>Functions that perform network-based things like ping, port tests, etc.</p>
<dl class="function">
<dt id="trigger.utils.network.ping">
<code class="descclassname">trigger.utils.network.</code><code class="descname">ping</code><span class="sig-paren">(</span><em>host</em>, <em>count=1</em>, <em>timeout=5</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.network.ping" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pass/fail for a ping. Supports POSIX only.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; Hostname or address</li>
<li><strong>count</strong> &#8211; Repeat count</li>
<li><strong>timeout</strong> &#8211; Timeout in seconds</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.utils</span> <span class="k">import</span> <span class="n">network</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">network</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s1">&#39;aol.com&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">network</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s1">&#39;192.168.199.253&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.network.test_tcp_port">
<code class="descclassname">trigger.utils.network.</code><code class="descname">test_tcp_port</code><span class="sig-paren">(</span><em>host</em>, <em>port=23</em>, <em>timeout=5</em>, <em>check_result=False</em>, <em>expected_result=''</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.network.test_tcp_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to connect to a TCP port. Returns a Boolean.</p>
<p>If <code class="docutils literal"><span class="pre">check_result</span></code> is set, the first line of output is retreived from the
connection and the starting characters must match <code class="docutils literal"><span class="pre">expected_result</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; Hostname or address</li>
<li><strong>port</strong> &#8211; Destination port</li>
<li><strong>timeout</strong> &#8211; Timeout in seconds</li>
<li><strong>check_result</strong> &#8211; Whether or not to do a string check (e.g. version banner)</li>
<li><strong>expected_result</strong> &#8211; The expected result!</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test_tcp_port</span><span class="p">(</span><span class="s1">&#39;aol.com&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_tcp_port</span><span class="p">(</span><span class="s1">&#39;aol.com&#39;</span><span class="p">,</span> <span class="mi">12345</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.network.test_ssh">
<code class="descclassname">trigger.utils.network.</code><code class="descname">test_ssh</code><span class="sig-paren">(</span><em>host</em>, <em>port=22</em>, <em>timeout=5</em>, <em>version=('SSH-1.99'</em>, <em>'SSH-2.0')</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.network.test_ssh" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to a TCP port and confirm the SSH version. Defaults to SSHv2.</p>
<p>Note that the default of (&#8216;SSH-1.99&#8217;, &#8216;SSH-2.0&#8217;) both indicate SSHv2 per
RFC 4253. (Ref: <a class="reference external" href="http://en.wikipedia.org/wiki/Secure_Shell#Version_1.99">http://en.wikipedia.org/wiki/Secure_Shell#Version_1.99</a>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; Hostname or address</li>
<li><strong>port</strong> &#8211; Destination port</li>
<li><strong>timeout</strong> &#8211; Timeout in seconds</li>
<li><strong>version</strong> &#8211; The SSH version prefix (e.g. &#8220;SSH-2.0&#8221;). This may also be a tuple of
prefixes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test_ssh</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_ssh</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;SSH-1.5&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.network.address_is_internal">
<code class="descclassname">trigger.utils.network.</code><code class="descname">address_is_internal</code><span class="sig-paren">(</span><em>ip</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.network.address_is_internal" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines if an IP address is internal to your network. Relies on
networks specified in <code class="xref py py-mod docutils literal"><span class="pre">settings.INTERNAL_NETWORKS</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ip</strong> &#8211; IP address to test.</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">address_is_internal</span><span class="p">(</span><span class="s1">&#39;1.1.1.1&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="trigger-utils-notifications">
<h2><a class="reference internal" href="#module-trigger.utils.notifications" title="trigger.utils.notifications"><code class="xref py py-mod docutils literal"><span class="pre">trigger.utils.notifications</span></code></a><a class="headerlink" href="#trigger-utils-notifications" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-trigger.utils.notifications"></span><p>Pluggable event notification system for Trigger.</p>
<dl class="function">
<dt id="trigger.utils.notifications.send_email">
<code class="descclassname">trigger.utils.notifications.</code><code class="descname">send_email</code><span class="sig-paren">(</span><em>addresses</em>, <em>subject</em>, <em>body</em>, <em>sender</em>, <em>mailhost='localhost'</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.notifications.send_email" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends an email to a list of recipients. Returns <code class="docutils literal"><span class="pre">True</span></code> when done.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>addresses</strong> &#8211; List of email recipients</li>
<li><strong>subject</strong> &#8211; The email subject</li>
<li><strong>body</strong> &#8211; The email body</li>
<li><strong>sender</strong> &#8211; The email sender</li>
<li><strong>mailhost</strong> &#8211; (Optional) Mail server address</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.notifications.send_notification">
<code class="descclassname">trigger.utils.notifications.</code><code class="descname">send_notification</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.notifications.send_notification" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple entry point into <a class="reference internal" href="#trigger.utils.notifications.handlers.notify" title="trigger.utils.notifications.handlers.notify"><code class="xref py py-obj docutils literal"><span class="pre">notify</span></code></a> that
takes any arguments and tries to handle them to send a notification.</p>
<p>This relies on handlers to be definied within
<code class="docutils literal"><span class="pre">settings.NOTIFICATION_HANDLERS</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.notifications.email_handler">
<code class="descclassname">trigger.utils.notifications.</code><code class="descname">email_handler</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.notifications.email_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Default email notification handler.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.notifications.notify">
<code class="descclassname">trigger.utils.notifications.</code><code class="descname">notify</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.notifications.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate thru registered handlers to handle events and send notifications.</p>
<p>Handlers should return <code class="docutils literal"><span class="pre">True</span></code> if they have performed the desired action
or <code class="docutils literal"><span class="pre">None</span></code> if they have not.</p>
</dd></dl>

<div class="section" id="module-trigger.utils.notifications.handlers">
<span id="trigger-utils-notifications-handlers"></span><h3><a class="reference internal" href="#module-trigger.utils.notifications.handlers" title="trigger.utils.notifications.handlers"><code class="xref py py-mod docutils literal"><span class="pre">trigger.utils.notifications.handlers</span></code></a><a class="headerlink" href="#module-trigger.utils.notifications.handlers" title="Permalink to this headline">¶</a></h3>
<p>Handlers for event notifications.</p>
<p>Handlers are specified by full module path within
<code class="docutils literal"><span class="pre">settings.NOTIFICATION_HANDLERS</span></code>. These are then imported and registered
internally in this module.</p>
<p>The primary public interface to this module is
<a class="reference internal" href="#trigger.utils.notifications.handlers.notify" title="trigger.utils.notifications.handlers.notify"><code class="xref py py-obj docutils literal"><span class="pre">notify</span></code></a> which is in turn called by
<a class="reference internal" href="#trigger.utils.notifications.send_notification" title="trigger.utils.notifications.send_notification"><code class="xref py py-obj docutils literal"><span class="pre">send_notification</span></code></a> to send notifications.</p>
<p>Handlers should return <code class="docutils literal"><span class="pre">True</span></code> if they have performed the desired action
or <code class="docutils literal"><span class="pre">None</span></code> if they have not.</p>
<p>A handler can either define its own custom behavior, or leverage a custom
<a class="reference internal" href="#trigger.utils.notifications.events.Event" title="trigger.utils.notifications.events.Event"><code class="xref py py-obj docutils literal"><span class="pre">Event</span></code></a> object. The goal was to provide a
simple public interface to customizing event notifications.</p>
<p>If not customized within <a class="reference internal" href="../configuration.html#std:setting-NOTIFICATION_HANDLERS"><code class="xref std std-setting docutils literal"><span class="pre">NOTIFICATION_HANDLERS</span></code></a>, the default
notification type is an <code class="xref py py-obj docutils literal"><span class="pre">EmailEvent</span></code> that is
handled by <a class="reference internal" href="#trigger.utils.notifications.handlers.email_handler" title="trigger.utils.notifications.handlers.email_handler"><code class="xref py py-obj docutils literal"><span class="pre">email_handler</span></code></a>.</p>
<dl class="function">
<dt id="trigger.utils.notifications.handlers.email_handler">
<code class="descclassname">trigger.utils.notifications.handlers.</code><code class="descname">email_handler</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.notifications.handlers.email_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Default email notification handler.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.notifications.handlers.notify">
<code class="descclassname">trigger.utils.notifications.handlers.</code><code class="descname">notify</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.notifications.handlers.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate thru registered handlers to handle events and send notifications.</p>
<p>Handlers should return <code class="docutils literal"><span class="pre">True</span></code> if they have performed the desired action
or <code class="docutils literal"><span class="pre">None</span></code> if they have not.</p>
</dd></dl>

</div>
<div class="section" id="module-trigger.utils.notifications.events">
<span id="trigger-utils-notifications-events"></span><h3><a class="reference internal" href="#module-trigger.utils.notifications.events" title="trigger.utils.notifications.events"><code class="xref py py-mod docutils literal"><span class="pre">trigger.utils.notifications.events</span></code></a><a class="headerlink" href="#module-trigger.utils.notifications.events" title="Permalink to this headline">¶</a></h3>
<p>Event objects for the notification system.</p>
<p>These are intended to be used within event handlers such as
<a class="reference internal" href="#trigger.utils.notifications.handlers.email_handler" title="trigger.utils.notifications.handlers.email_handler"><code class="xref py py-obj docutils literal"><span class="pre">email_handler()</span></code></a>.</p>
<p>If not customized within <a class="reference internal" href="../configuration.html#std:setting-NOTIFICATION_HANDLERS"><code class="xref std std-setting docutils literal"><span class="pre">NOTIFICATION_HANDLERS</span></code></a>, the default
notification type is an <code class="xref py py-obj docutils literal"><span class="pre">EmailEvent</span></code> that is
handled by <a class="reference internal" href="#trigger.utils.notifications.handlers.email_handler" title="trigger.utils.notifications.handlers.email_handler"><code class="xref py py-obj docutils literal"><span class="pre">email_handler</span></code></a>.</p>
<dl class="class">
<dt id="trigger.utils.notifications.events.Event">
<em class="property">class </em><code class="descclassname">trigger.utils.notifications.events.</code><code class="descname">Event</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.notifications.events.Event" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for events.</p>
<p>It just populates the attribute dict with all keyword arguments thrown at
the constructor.</p>
<p>All <code class="docutils literal"><span class="pre">Event</span></code> objects are expected to have a <code class="docutils literal"><span class="pre">.handle()</span></code> method that
willl be called by a handler function. Any user-defined event objects must
have a working <code class="docutils literal"><span class="pre">.handle()</span></code> method that returns <code class="docutils literal"><span class="pre">True</span></code> upon success or
<code class="docutils literal"><span class="pre">None</span></code> upon a failure when handling the event passed to it.</p>
<p>If you specify <code class="docutils literal"><span class="pre">required_args</span></code>, these must have a value other than
<code class="docutils literal"><span class="pre">None</span></code> when passed to the constructor.</p>
</dd></dl>

<dl class="class">
<dt id="trigger.utils.notifications.events.Notification">
<em class="property">class </em><code class="descclassname">trigger.utils.notifications.events.</code><code class="descname">Notification</code><span class="sig-paren">(</span><em>title=None</em>, <em>message=None</em>, <em>sender=None</em>, <em>recipients=None</em>, <em>event_status='failure'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.notifications.events.Notification" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for notification events.</p>
<p>The <code class="docutils literal"><span class="pre">title</span></code> and <code class="docutils literal"><span class="pre">message</span></code> arguments are the only two that are required.
This is to simplify the interface when sending notifications and will cause
notifications to send from the default <code class="docutils literal"><span class="pre">sender</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">default</span>
<span class="pre">``recipients</span></code> that are specified withing the global settings.</p>
<p>If <code class="docutils literal"><span class="pre">sender</span></code> or <code class="docutils literal"><span class="pre">recipients</span></code> are specified, they will override the
global defaults.</p>
<p>Note that this base class has no <code class="docutils literal"><span class="pre">.handle()</span></code> method defined.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>title</strong> &#8211; The title/subject of the notification</li>
<li><strong>message</strong> &#8211; The message/body of the notification</li>
<li><strong>sender</strong> &#8211; A string representing the sender of the notification (such as an email
address or a hostname)</li>
<li><strong>recipients</strong> &#8211; An iterable containing strings representing the recipients of of the
notification (such as a list of emails or hostnames)</li>
<li><strong>event_status</strong> &#8211; Whether this event is a <code class="xref py py-obj docutils literal"><span class="pre">failure</span></code> or a <code class="xref py py-obj docutils literal"><span class="pre">success</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="trigger.utils.notifications.events.EmailEvent">
<em class="property">class </em><code class="descclassname">trigger.utils.notifications.events.</code><code class="descname">EmailEvent</code><span class="sig-paren">(</span><em>title=None</em>, <em>message=None</em>, <em>sender=None</em>, <em>recipients=None</em>, <em>event_status='failure'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.notifications.events.EmailEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>An email notification event.</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-trigger.utils.rcs">
<span id="trigger-utils-rcs"></span><h2><a class="reference internal" href="#module-trigger.utils.rcs" title="trigger.utils.rcs"><code class="xref py py-mod docutils literal"><span class="pre">trigger.utils.rcs</span></code></a><a class="headerlink" href="#module-trigger.utils.rcs" title="Permalink to this headline">¶</a></h2>
<p>Provides a CVS like wrapper for local RCS (Revision Control System) with common commands.</p>
<dl class="class">
<dt id="trigger.utils.rcs.RCS">
<em class="property">class </em><code class="descclassname">trigger.utils.rcs.</code><code class="descname">RCS</code><span class="sig-paren">(</span><em>filename</em>, <em>create=True</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.rcs.RCS" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple wrapper for CLI <code class="docutils literal"><span class="pre">rcs</span></code> command. An instance is bound to a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>file</strong> &#8211; The filename (or path) to use</li>
<li><strong>create</strong> &#8211; If set, create the file if it doesn&#8217;t exist</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.utils.rcs</span> <span class="k">import</span> <span class="n">RCS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span> <span class="o">=</span> <span class="n">RCS</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;bar</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">checkin</span><span class="p">(</span><span class="s1">&#39;This is my commit message&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">rcs</span><span class="o">.</span><span class="n">log</span><span class="p">()</span>
<span class="go">RCS file: RCS/foo,v</span>
<span class="go">Working file: foo</span>
<span class="go">head: 1.2</span>
<span class="go">branch:</span>
<span class="go">locks: strict</span>
<span class="go">access list:</span>
<span class="go">symbolic names:</span>
<span class="go">keyword substitution: kv</span>
<span class="go">total revisions: 2;     selected revisions: 2</span>
<span class="go">description:</span>
<span class="go">----------------------------</span>
<span class="go">revision 1.2</span>
<span class="go">date: 2011/07/08 21:01:28;  author: jathan;  state: Exp;  lines: +1 -0</span>
<span class="go">This is my commit message</span>
<span class="go">----------------------------</span>
<span class="go">revision 1.1</span>
<span class="go">date: 2011/07/08 20:56:53;  author: jathan;  state: Exp;</span>
<span class="go">first commit</span>
</pre></div>
</div>
<dl class="method">
<dt id="trigger.utils.rcs.RCS.checkin">
<code class="descname">checkin</code><span class="sig-paren">(</span><em>logmsg='none'</em>, <em>initial=False</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.rcs.RCS.checkin" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an RCS checkin. If successful this also unlocks the file, so
there is no need to unlock it afterward.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logmsg</strong> &#8211; The RCS commit message</li>
<li><strong>initial</strong> &#8211; Initialize a new RCS file, but do not deposit any revision</li>
<li><strong>verbose</strong> &#8211; Print command output</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">checkin</span><span class="p">(</span><span class="s1">&#39;This is my commit message&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="trigger.utils.rcs.RCS.lock">
<code class="descname">lock</code><span class="sig-paren">(</span><em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.rcs.RCS.lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an RCS checkout with lock. Returns boolean of whether lock
was sucessful.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>verbose</strong> &#8211; Print command output</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="trigger.utils.rcs.RCS.lock_loop">
<code class="descname">lock_loop</code><span class="sig-paren">(</span><em>callback=None</em>, <em>timeout=5</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.rcs.RCS.lock_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep trying to lock the file until a lock is obtained.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>callback</strong> &#8211; The function to call after lock is complete</li>
<li><strong>timeout</strong> &#8211; How long to sleep between lock attempts</li>
<li><strong>verbose</strong> &#8211; Print command output</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Default:</dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">lock_loop</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> 
<span class="go">Sleeping to wait for the lock on the file: foo</span>
<span class="go">Sleeping to wait for the lock on the file: foo</span>
</pre></div>
</div>
</dd>
<dt>Verbose:</dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">lock_loop</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">RCS/foo,v  --&gt;  foo</span>
<span class="go">co: RCS/foo,v: Revision 1.2 is already locked by joe.</span>
<span class="go">Sleeping to wait for the lock on the file: foo</span>
<span class="go">RCS/foo,v  --&gt;  foo</span>
<span class="go">co: RCS/foo,v: Revision 1.2 is already locked by joe.</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="trigger.utils.rcs.RCS.log">
<code class="descname">log</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.rcs.RCS.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the RCS log as a string (see above).</p>
</dd></dl>

<dl class="method">
<dt id="trigger.utils.rcs.RCS.unlock">
<code class="descname">unlock</code><span class="sig-paren">(</span><em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#trigger.utils.rcs.RCS.unlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an RCS checkout with unlock (for cancelling changes).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>verbose</strong> &#8211; Print command output</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../development.html" class="btn btn-neutral float-right" title="Development" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="twister.html" class="btn btn-neutral" title="trigger.twister — Asynchronous device interaction library" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2006-2016, AOL Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.6.rc4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>