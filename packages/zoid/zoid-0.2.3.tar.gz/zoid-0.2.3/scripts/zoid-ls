#!/usr/bin/env python
# -*- coding: utf-8 -*-

from __future__ import unicode_literals, print_function

if __name__ == '__main__':
    import zoid
    from zoid import Util

    zoid.init()

    headers = [
        "Name",
        "IP",
        "Port",
        "Branch",
        "Running",
        "Players"
    ]

    rows = []
    for cfg in zoid.CONFIG.get_derived_nodes("server"):
        srv = zoid.get_server(cfg.name)

        rows.append([srv.name, srv.get_ip(), srv.get_port(), srv.get_branch()[0], "Yes" if srv.is_running() else "No", len(srv.get_connections())])

    Util.print_table(headers, rows)